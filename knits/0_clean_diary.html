<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Cleaning diary data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="0_clean_diary_files/libs/clipboard/clipboard.min.js"></script>
<script src="0_clean_diary_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="0_clean_diary_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="0_clean_diary_files/libs/quarto-html/popper.min.js"></script>
<script src="0_clean_diary_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="0_clean_diary_files/libs/quarto-html/anchor.min.js"></script>
<link href="0_clean_diary_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="0_clean_diary_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="0_clean_diary_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="0_clean_diary_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="0_clean_diary_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning diary data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to detect and warn about conflicts</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(conflicted)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">"filter"</span>, <span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>[conflicted] Will prefer dplyr::filter over any other package.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">conflict_prefer</span>(<span class="st">"select"</span>, <span class="st">"dplyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>[conflicted] Will prefer dplyr::select over any other package.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to read in data</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>path_raw <span class="ot">&lt;-</span> <span class="st">"_data/data_raw"</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>path_nids <span class="ot">&lt;-</span> <span class="st">"_data/data_process"</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>path_ready <span class="ot">&lt;-</span> <span class="st">"_data/data_ready"</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># for data wrangling and cleaning</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ purrr     1.0.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   4.0.0     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"_scripts/functions.R"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>baseline <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_nids,<span class="st">"baseline_nid.csv"</span>), <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_nids, <span class="st">"diary_nid.csv"</span>), <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">StartDate =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">EndDate =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">RecordedDate =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">AuDB4 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">AuDB4_7_TEXT =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">AuDB5 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">AuDB5_6_TEXT =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q186 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q186_8_TEXT =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">PSB2 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q211 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">PSB15 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">OSBB2 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">OSBB6 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">OSBB10_11 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">SSAB3 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">SSAB6_7 =</span> <span class="fu">col_character</span>(),</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">Q215 =</span> <span class="fu">col_character</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,928
Columns: 191
$ start_date            &lt;chr&gt; "2022-10-19 10:11:09", "2022-10-19 11:10:25", "2…
$ end_date              &lt;chr&gt; "2022-10-19 10:13:50", "2022-10-19 11:11:32", "2…
$ status                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ ip_address            &lt;chr&gt; "72.33.2.202", "35.148.93.36", "72.33.2.165", "7…
$ progress              &lt;dbl&gt; 100, 100, 100, 100, 100, 100, 100, 100, 100, 100…
$ duration_in_seconds   &lt;dbl&gt; 160, 66, 84, 151, 103, 105, 66, 92, 121, 171, 48…
$ finished              &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ recorded_date         &lt;chr&gt; "2022-10-19 10:13:50", "2022-10-19 11:11:32", "2…
$ response_id           &lt;chr&gt; "R_0kqlvefI2O3z3cR", "R_2c1Nih6gyoqYPMo", "R_2sc…
$ recipient_last_name   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ recipient_first_name  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ recipient_email       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ external_reference    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ location_latitude     &lt;dbl&gt; 43.0782, 43.0812, 43.0782, 43.0782, 43.0782, 43.…
$ location_longitude    &lt;dbl&gt; -89.4075, -89.3845, -89.4075, -89.4075, -89.4075…
$ distribution_channel  &lt;chr&gt; "anonymous", "anonymous", "anonymous", "anonymou…
$ user_language         &lt;chr&gt; "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", …
$ au_db1                &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, …
$ psb1                  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, …
$ osbb1                 &lt;dbl&gt; 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 2, 2, 2, 1, 2, …
$ ssab1                 &lt;dbl&gt; 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, …
$ drugs_screen_fu       &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 1, 2, 2, 2, 2, 2, …
$ bpa1                  &lt;dbl&gt; 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, …
$ porn_screen_fu        &lt;dbl&gt; 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, …
$ au_db2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db4                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db4_7_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db5                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db5_6_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db6                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db7                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db8                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db9                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q186                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q186_8_text           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb2                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "1,2,3,4…
$ psb3                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ psb4                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ psb5                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb6                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb8                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb9                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb10                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ psb10_only_one        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ psb11_only_one        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb11_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb12_only_one        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, NA, N…
$ psb12_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q211                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "1", NA,…
$ q211_7_text           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb13                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ q198_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb14_only_one_1      &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb13_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb_selfdrunk_tried_1 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb14_tried_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "7", NA,…
$ psb15_10_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_tried           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_tried_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb16_10_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_tried_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_2               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ pbs17_3               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ pbs17_4               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ pbs17_5               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb18_to_23_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 8, NA, N…
$ psb18_to_23_2         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10, NA, …
$ psb18_to_23_3         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10, NA, …
$ q141_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10, NA, …
$ q141_2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ q141_3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ pbs28_31_1            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ pbs28_31_2            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ pbs28_31_3            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ pbs28_31_4            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb24_to_27_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb24_to_27_2         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb24_to_27_3         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb24_to_27_4         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb32_1               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ psb33_1               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, NA, N…
$ psb34_1_to_34_5_1     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb34_1_to_34_5_2     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb34_1_to_34_5_3     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb34_1_to_34_5_4     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb34_1_to_34_5_5     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb34_1_to_34_5_6     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, N…
$ psb34_1_to_34_5_7     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, NA, N…
$ psb34                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb35                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, N…
$ psb36                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ psb37                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, N…
$ osbb2                 &lt;chr&gt; "4", NA, NA, NA, NA, NA, NA, NA, NA, "4", NA, NA…
$ osbb2_13_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb3                 &lt;dbl&gt; 1, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA…
$ osbb4                 &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA…
$ osbb5                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, N…
$ osbb6                 &lt;chr&gt; "0", NA, NA, NA, NA, NA, NA, NA, NA, "0", NA, NA…
$ osbb6_5_text          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb7                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb7_5_text          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb8                 &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA…
$ osbb9                 &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb10_11             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb10_11_10_text     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb12_to_13_1        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb12_to_13_2        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb14                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA…
$ osbb15                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb15_5_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb16_1              &lt;dbl&gt; 1, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA…
$ osbb17_1              &lt;dbl&gt; 3, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA…
$ osbb18_1_to_5_1       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_3       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_4       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_5       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_6       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_7       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb19                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA…
$ osbb20                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA…
$ osbb21                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA…
$ osbb22                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA…
$ ssab2                 &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab3                 &lt;chr&gt; NA, NA, NA, "3", NA, NA, NA, NA, NA, NA, NA, NA,…
$ ssab3_8_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab4                 &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab5                 &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab6_7               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab6_7_10_text       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab8_to_9_1          &lt;dbl&gt; NA, NA, NA, 7, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab8_to_9_2          &lt;dbl&gt; NA, NA, NA, 6, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab10_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab11_1              &lt;dbl&gt; NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_1       &lt;dbl&gt; NA, NA, NA, 4, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_2       &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_3       &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_4       &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_5       &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_6       &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab12_1_to_5_7       &lt;dbl&gt; NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab13                &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab14                &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab15                &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssab16                &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ q215                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, "9", NA, NA, NA, NA,…
$ q215_8_text           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_4                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, N…
$ q195                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q196_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q202                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 327, NA,…
$ q202_36_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q208                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 734, NA,…
$ q208_35_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q210                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 733, NA,…
$ q210_34_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q179                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q180                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q181                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ mis1                  &lt;dbl&gt; 1, 1, 2, 3, 1, 1, 2, 3, 1, 2, 1, 1, 1, 1, NA, 1,…
$ mis2                  &lt;dbl&gt; 3, 1, 1, 3, 2, 4, 1, 1, 1, 3, 1, 3, 2, 1, NA, 3,…
$ mis3                  &lt;dbl&gt; 1, 3, 2, 2, 3, 3, 2, 3, 1, 1, 1, 1, 2, 4, NA, 2,…
$ mis4                  &lt;dbl&gt; 2, 1, 1, 4, 2, 1, 2, 2, 1, 1, 1, 1, 1, 1, NA, 1,…
$ phq8_1_fu             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, NA, 0,…
$ phq8_2_fu             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, NA, 0,…
$ phq8_3_fu             &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, NA, 0,…
$ phq8_4_fu             &lt;dbl&gt; 2, 0, 0, 1, 0, 1, 0, 2, 1, 0, 3, 1, 1, 1, NA, 0,…
$ gad_fu_nervous        &lt;dbl&gt; 0, 2, 1, 1, 1, 1, 0, 2, 0, 0, 2, 1, 1, 0, NA, 1,…
$ gad_fu_notabletostop  &lt;dbl&gt; 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 2, 1, 0, 0, NA, 1,…
$ b1                    &lt;dbl&gt; 5, 0, 2, 0, 0, 1, 0, 1, 0, 0, 5, 0, 0, 5, NA, 0,…
$ c2                    &lt;dbl&gt; 5, 0, 1, 0, 0, 0, 0, 0, 0, 0, 5, 0, 1, 5, NA, 0,…
$ d2                    &lt;dbl&gt; 5, 0, 0, 0, 0, 0, 0, 1, 0, 0, 5, 0, 0, 5, NA, 0,…
$ e4                    &lt;dbl&gt; 5, 0, 0, 1, 0, 1, 0, 0, 0, 0, 5, 0, 0, 5, NA, 1,…
$ ssid                  &lt;dbl&gt; 101521080444, 101521080444, 101521080444, 101521…
$ pid                   &lt;dbl&gt; 101822130256, 101822173925, 101822125304, 101822…
$ sms                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ day                   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, …
$ sig                   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ r_date                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ time                  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ rt                    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ time_zone             &lt;dbl&gt; -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, …
$ rid                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ nid                   &lt;dbl&gt; 6891674, 9128298, 3533571, 3766694, 9972029, 870…</code></pre>
</div>
</div>
<section id="initial-cleaning" class="level1">
<h1>Initial cleaning</h1>
<p>Format dates</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">start_date =</span> <span class="fu">as_datetime</span>(start_date, <span class="at">tz =</span> <span class="st">"America/Chicago"</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">end_date =</span> <span class="fu">as_datetime</span>(end_date, <span class="at">tz =</span> <span class="st">"America/Chicago"</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">recorded_date =</span> <span class="fu">as_datetime</span>(recorded_date, <span class="at">tz =</span> <span class="st">"America/Chicago"</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">date</span>(start_date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Confirm participant identifiers</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data) <span class="co"># 6928</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6928</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(data<span class="sc">$</span>nid)) <span class="co"># 278 - nid derived from sona_id; links baseline to daily surveys</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 278</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(data<span class="sc">$</span>pid)) <span class="co"># 278 - pid exclusive to daily surveys</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 278</code></pre>
</div>
</div>
<section id="remove-blank-surveys" class="level2">
<h2 class="anchored" data-anchor-id="remove-blank-surveys">Remove blank surveys</h2>
<p>Remove 136 completely blank surveys</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>data_empty <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(au_db1<span class="sc">:</span>e4) </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>data_empty_rows <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">rowSums</span>(<span class="fu">is.na</span>(data_empty)) <span class="sc">==</span> <span class="fu">ncol</span>(data_empty))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(data_empty_rows)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 136</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">row_number</span>() <span class="sc">%in%</span> data_empty_rows)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="identify-duplicates" class="level2">
<h2 class="anchored" data-anchor-id="identify-duplicates">Identify duplicates</h2>
<p>255 duplicates (i.e., more than one survey on same day for one pid)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 255 × 3
            pid date           n
          &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;
 1 102322233822 2022-11-18     4
 2 101922110450 2022-11-01     3
 3 101922140746 2022-10-23     3
 4 101922140746 2022-10-26     3
 5 101922141125 2022-10-21     3
 6 101922210432 2022-10-24     3
 7 102022122815 2022-10-29     3
 8 102322233822 2022-11-15     3
 9 102622130043 2022-11-16     3
10 102722110650 2022-11-19     3
# ℹ 245 more rows</code></pre>
</div>
</div>
<p>Check if responses are same on duplicates</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 521</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 462</code></pre>
</div>
</div>
<p>Remove duplicates that are same on all columns except survey metadata<br>
Will keep first survey so we have start time of first survey that day</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>duplicate_responses <span class="ot">&lt;-</span> <span class="fu">which</span>(duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">20</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">duplicated</span>())</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>duplicate_ids <span class="ot">&lt;-</span> duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> duplicate_responses) <span class="sc">%&gt;%</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(response_id)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> duplicate_ids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Left with 197 duplicate surveys</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 197 × 3
            pid date           n
          &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;
 1 102322233822 2022-11-18     4
 2 101922110450 2022-11-01     3
 3 101922140746 2022-10-23     3
 4 101922140746 2022-10-26     3
 5 101922141125 2022-10-21     3
 6 101922210432 2022-10-24     3
 7 102022122815 2022-10-29     3
 8 102322233822 2022-11-15     3
 9 102622130043 2022-11-16     3
10 101922110450 2022-10-24     2
# ℹ 187 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check for duplicate surveys with no data other than screening questions for branching</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data_empty <span class="ot">&lt;-</span> duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(au_db2<span class="sc">:</span>e4) </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>data_empty_rows <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">rowSums</span>(<span class="fu">is.na</span>(data_empty)) <span class="sc">==</span> <span class="fu">ncol</span>(data_empty))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> data_empty_rows) <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 × 3
# Groups:   nid, date [40]
       nid date           n
     &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;
 1 5140108 2022-11-16     2
 2 1083617 2022-11-12     1
 3 1215369 2022-11-06     1
 4 1345823 2022-11-12     1
 5 1636530 2022-10-31     1
 6 2148675 2022-11-07     1
 7 2531227 2022-11-01     1
 8 3187228 2022-10-25     1
 9 3279665 2022-11-03     1
10 3313178 2022-10-27     1
# ℹ 30 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 nid has 2 mostly blank duplicates - check to see if they have another survey on that day</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># they do!</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nid <span class="sc">==</span> <span class="st">"5140108"</span> <span class="sc">&amp;</span> date <span class="sc">==</span> <span class="st">"2022-11-16"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 193
           pid date           n start_date          end_date            status
         &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;dttm&gt;              &lt;dttm&gt;               &lt;dbl&gt;
1 102622130043 2022-11-16     3 2022-11-16 11:24:31 2022-11-16 11:25:36      0
2 102622130043 2022-11-16     3 2022-11-16 11:23:19 2022-11-16 11:23:30      0
3 102622130043 2022-11-16     3 2022-11-16 11:23:55 2022-11-16 11:24:10      0
# ℹ 187 more variables: ip_address &lt;chr&gt;, progress &lt;dbl&gt;,
#   duration_in_seconds &lt;dbl&gt;, finished &lt;dbl&gt;, recorded_date &lt;dttm&gt;,
#   response_id &lt;chr&gt;, recipient_last_name &lt;lgl&gt;, recipient_first_name &lt;lgl&gt;,
#   recipient_email &lt;lgl&gt;, external_reference &lt;lgl&gt;, location_latitude &lt;dbl&gt;,
#   location_longitude &lt;dbl&gt;, distribution_channel &lt;chr&gt;, user_language &lt;chr&gt;,
#   au_db1 &lt;dbl&gt;, psb1 &lt;dbl&gt;, osbb1 &lt;dbl&gt;, ssab1 &lt;dbl&gt;, drugs_screen_fu &lt;dbl&gt;,
#   bpa1 &lt;dbl&gt;, porn_screen_fu &lt;dbl&gt;, au_db2 &lt;dbl&gt;, au_db3 &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>filter out mostly blank duplicates (i.e., only responded to branching questions and have more complete survey on same day)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>response_ids <span class="ot">&lt;-</span> duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">row_number</span>() <span class="sc">%in%</span> data_empty_rows) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(response_id)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> response_ids)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>159 duplicates left</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 159 × 3
            pid date           n
          &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;
 1 102322233822 2022-11-18     4
 2 101922110450 2022-11-01     3
 3 101922140746 2022-10-23     3
 4 101922140746 2022-10-26     3
 5 101922141125 2022-10-21     3
 6 102322233822 2022-11-15     3
 7 101922110450 2022-10-24     2
 8 101922110450 2022-10-30     2
 9 101922110450 2022-11-07     2
10 101922130136 2022-10-20     2
# ℹ 149 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at surveys taken at midnight to see if date is incorrect due to being slightly after midnight</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">hour</span>(start_date) <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nid, start_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 2
      nid start_date         
    &lt;dbl&gt; &lt;dttm&gt;             
1 9796568 2022-10-29 00:03:52
2 9740303 2022-10-29 00:14:23
3 6681525 2022-11-06 00:14:55
4 3256800 2022-11-10 01:01:05
5 3256800 2022-11-10 01:01:51
6 9328313 2022-11-11 00:10:54
7 2564475 2022-11-13 00:57:58
8 8311815 2022-11-15 00:14:07</code></pre>
</div>
</div>
<p>5/8 Duplicate surveys taken at midnight and later that night and are missing survey day before- determined midnight survey was for previous day. Correcting new date variable here.</p>
<p>Note: this date variable lines up roughly to day on study but will not be used for making labels/prediction windows. The raw end survey time will be used for this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "9796568") |&gt; </span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "9740303") |&gt; </span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "6681525") |&gt; </span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "3256800") |&gt; </span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "9328313") |&gt; </span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "2564475") |&gt; </span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="co"># data |&gt; </span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(nid == "8311815") |&gt; </span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(date, response_id, start_date) |&gt; </span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(n = Inf)</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">if_else</span>(response_id <span class="sc">==</span> <span class="st">"R_28GUR3cJzRXaTPC"</span>, <span class="fu">date</span>(<span class="st">"2022-11-10"</span>), </span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>                        date),</span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">if_else</span>(response_id <span class="sc">==</span> <span class="st">"R_3lEREAWesaFQSnG"</span>, <span class="fu">date</span>(<span class="st">"2022-10-28"</span>),</span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>                        date),</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">if_else</span>(response_id <span class="sc">==</span> <span class="st">"R_21G38UK4RkS5Ky5"</span>, <span class="fu">date</span>(<span class="st">"2022-10-28"</span>),</span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>                        date),</span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">if_else</span>(response_id <span class="sc">==</span> <span class="st">"R_2q1tWYtBw0XbZlM"</span>, <span class="fu">date</span>(<span class="st">"2022-11-05"</span>),</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>                        date),</span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">if_else</span>(response_id <span class="sc">==</span> <span class="st">"R_2c63k6bRzLwkyJT"</span>, <span class="fu">date</span>(<span class="st">"2022-11-14"</span>),</span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>                        date))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at differences in branching questions among duplicates</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>duplicates_branch_match <span class="ot">&lt;-</span> duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nid, date, au_db1<span class="sc">:</span>porn_screen_fu) <span class="sc">%&gt;%</span> </span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n) <span class="sc">%&gt;%</span> </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(duplicates, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nid"</span>, <span class="st">"date"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at mental health questions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>duplicates_branch_match <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(au_db1 <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> psb1 <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> osbb1 <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> ssab1 <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                 drugs_screen_fu <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> bpa1 <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> porn_screen_fu <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nid, date, response_id, start_date, mis1<span class="sc">:</span>e4) <span class="sc">%&gt;%</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 165
Columns: 18
Groups: nid, date [82]
$ nid                  &lt;dbl&gt; 1215369, 1215369, 1419718, 1419718, 1428771, 1428…
$ date                 &lt;date&gt; 2022-11-05, 2022-11-05, 2022-10-28, 2022-10-28, …
$ response_id          &lt;chr&gt; "R_2ZC8HYrCFZZnlIA", "R_2OMVgMmsh0PCohX", "R_XFce…
$ start_date           &lt;dttm&gt; 2022-11-05 16:50:30, 2022-11-05 16:53:09, 2022-1…
$ mis1                 &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 3…
$ mis2                 &lt;dbl&gt; 4, 1, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 3…
$ mis3                 &lt;dbl&gt; 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1, 3…
$ mis4                 &lt;dbl&gt; 2, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3…
$ phq8_1_fu            &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, NA, 0, 0, …
$ phq8_2_fu            &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, NA, 0, 0, …
$ phq8_3_fu            &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 2, 1, 1, 1, 0, 0, 0, NA, 1, 2, …
$ phq8_4_fu            &lt;dbl&gt; 0, 1, 0, 1, 0, 0, 1, 2, 2, 2, 1, 1, 0, NA, 1, 2, …
$ gad_fu_nervous       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, NA, 0, 0, …
$ gad_fu_notabletostop &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, NA, 0, 0, …
$ b1                   &lt;dbl&gt; 5, 5, 0, 0, 0, 0, 5, 5, 5, 5, 5, 5, 5, NA, 0, 0, …
$ c2                   &lt;dbl&gt; 5, 5, 0, 0, 1, 0, 5, 5, 5, 5, 5, 5, 5, NA, 0, 0, …
$ d2                   &lt;dbl&gt; 5, 5, 0, 0, 0, 0, 5, 5, 5, 5, 5, 5, 5, NA, 0, 0, …
$ e4                   &lt;dbl&gt; 5, 5, 0, 0, 0, 0, 5, 5, 5, 5, 5, 5, 5, NA, 0, 0, …</code></pre>
</div>
</div>
<p>If answers same keep more complete survey then first survey</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"R_3nl1aO9wz2HoliI"</span>, <span class="st">"R_3j0cQeVBMt5s0Y0"</span>,</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">"R_27UvVfdaNbLQIvA"</span>, <span class="st">"R_1roCa7SNA64ll6b"</span>, <span class="st">"R_3JjZhfFzAc87KLQ"</span>,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">"R_3eb3ZXUu8ma62HW"</span>, <span class="st">"R_1goOMvxm2OO37xE"</span>, <span class="st">"R_2anOsrKT0rWfpyh"</span>,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">"R_2v7x6suXsPA7lCE"</span>, <span class="st">"R_3n1q190pGvgnJvW"</span>, <span class="st">"R_3Mmsiry2UFC250F"</span>,</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">"R_1CD8AVjRYbvFOSE"</span>, <span class="st">"R_1pGNAcQtKqkDl4Y"</span>, <span class="st">"R_1Kp50zwQe1EHJ9A"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If answers differ only by 1-2 items, keep more complete survey or if both complete keep first survey</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"R_2e3FNxw2bfXqVhD"</span>, <span class="st">"R_3PuSSFXqM2rg75H"</span>,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_21jN639l8fmHhv7"</span>, <span class="st">"R_24cL375YzQDqcNs"</span>,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_27InzwQuaYLA91G"</span>, <span class="st">"R_2q3iIQW0ju1U0TC"</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_2aQz1zTeseotOnq"</span>, <span class="st">"R_aYqSgHFF1qJem9r"</span>,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1mI5Ldgr8fNIDJn"</span>, <span class="st">"R_5mZeozvhOLfQHyF"</span>,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3G2MmYKXMfOPpw8"</span>, <span class="st">"R_12hVYRgqDPJX7KM"</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_V418rtMyfoi5rTb"</span>, <span class="st">"R_1zfPXLu96CO1qfv"</span>, </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1FOH5eJeKZKDLaE"</span>, <span class="st">"R_vMHmj0vxM2bn98R"</span>,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1lt7qIcUoYRj7s2"</span>, <span class="st">"R_vAMr55UaumNxt9n"</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_xbVy68nr7ZEHK01"</span>, <span class="st">"R_12QL6qI8bCV2YPL"</span>,</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3rZiJxcPpT5dgx4"</span>, <span class="st">"R_27PDNNBEMijZqxM"</span>,</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3FJ7693Okhf5xgn"</span>, <span class="st">"R_DFXWiS5oKvsSevn"</span>,</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_uxoQLKB3iUwZvJ7"</span>, <span class="st">"R_5aMdcpvNUaRgepH"</span>,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1GWuG4iIs1EgIdy"</span>, <span class="st">"R_3nUxYS964qGdnyn"</span>,</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1jIj5b2QDOMaSgO"</span>, <span class="st">"R_2QFE8b5dMtmd3JL"</span>,</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_ZjK1J5cruthIO6R"</span>, <span class="st">"R_1kZV0eMBz42WEFW"</span>,</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1FfEfAVl19LMXFw"</span>, <span class="st">"R_3gZOFZK2937JZqj"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at other matching branch surveys</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 1 &amp; psb1 == 2 &amp; osbb1 == 2 &amp; ssab1 == 2 &amp; </span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 2) %&gt;% </span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 1 &amp; psb1 == 1 &amp; osbb1 == 2 &amp; ssab1 == 2 &amp; </span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 2) %&gt;% </span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 2 &amp; psb1 == 2 &amp; osbb1 == 1 &amp; ssab1 == 1 &amp; </span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 2) %&gt;% </span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 2 &amp; psb1 == 2 &amp; osbb1 == 2 &amp; ssab1 == 1 &amp; </span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 2) %&gt;% </span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 2 &amp; psb1 == 2 &amp; osbb1 == 2 &amp; ssab1 == 1 &amp; </span></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 1) %&gt;% </span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 2 &amp; psb1 == 1 &amp; osbb1 == 2 &amp; ssab1 == 1 &amp; </span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 1) %&gt;% </span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 1 &amp; psb1 == 2 &amp; osbb1 == 2 &amp; ssab1 == 2 &amp; </span></span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 1 &amp; porn_screen_fu == 2) %&gt;% </span></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates_branch_match %&gt;% </span></span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(au_db1 == 2 &amp; psb1 == 2 &amp; osbb1 == 1 &amp; ssab1 == 2 &amp; </span></span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true" tabindex="-1"></a><span class="co">#                  drugs_screen_fu == 2 &amp; bpa1 == 2 &amp; porn_screen_fu == 1) %&gt;% </span></span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(nid, date, response_id, start_date, au_db2:e4) %&gt;% </span></span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true" tabindex="-1"></a><span class="co">#   view()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If answers differ only by 1-2 items (or 3 items if more than one branch endorsed and completed), keep more complete survey or if both complete keep first survey</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"R_1DYDNJfbNuwRivW"</span>, <span class="st">"R_3w9vDPa7Aoq1lFD"</span>,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_22Gkq3271dAoUP2"</span>, <span class="st">"R_1gTtr4rJocjW0Uy"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_2uJW6wj5ne3i1wS"</span>, <span class="st">"R_3MGuKFZITFIe3NM"</span>,</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3MDR4RbykC162QV"</span>, <span class="st">"R_3Gq3wQfAmpYVFit"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3Mn9DViM1ZJlQ1Q"</span>, <span class="st">"R_3dYXmYQcqJbtXbD"</span>,</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_Ww9Ie3dTvQ58QbT"</span>, <span class="st">"R_1OVRbIUU6JzciJI"</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1P1q8xsYV2BQ3KG"</span>, <span class="st">"R_DclSImfNg9xma6B"</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3s17B90hYoNIXpy"</span>, <span class="st">"R_3Lb7H5oppSanIB0"</span>,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_Aafzxghrkp8ZNEl"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Look at non-matching branch surveys</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> duplicates_branch_match<span class="sc">$</span>response_id) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nid, date, response_id, start_date, au_db1<span class="sc">:</span>e4) <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 97
Columns: 167
$ nid                   &lt;dbl&gt; 8617355, 8617355, 8617355, 8617355, 8617355, 546…
$ date                  &lt;date&gt; 2022-10-24, 2022-10-24, 2022-11-01, 2022-11-01,…
$ response_id           &lt;chr&gt; "R_2wjejBG6wLUiPND", "R_aWWayxdHVI4j6Lv", "R_1eJ…
$ start_date            &lt;dttm&gt; 2022-10-24 12:10:47, 2022-10-24 20:04:44, 2022-…
$ au_db1                &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 3, 2, 2, 1, 1, 1, 2, 2, 2, 2, …
$ psb1                  &lt;dbl&gt; 1, 2, 2, 2, 2, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, …
$ osbb1                 &lt;dbl&gt; 2, 2, 2, 2, 2, 1, 1, 2, 1, 2, 2, 1, 1, 2, 2, 1, …
$ ssab1                 &lt;dbl&gt; 2, 2, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 1, 2, 2, 1, …
$ drugs_screen_fu       &lt;dbl&gt; 2, 2, 2, 2, 1, 2, 4, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ bpa1                  &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 4, 2, 2, 1, 1, 2, 2, 2, 2, 2, …
$ porn_screen_fu        &lt;dbl&gt; 2, 2, 2, 2, 2, 1, 1, 1, 1, 2, 2, 2, 1, 2, 2, 1, …
$ au_db2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 3, 2, 2, NA,…
$ au_db3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 3, 3, NA,…
$ au_db4                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, "3,4,5,6", "…
$ au_db4_7_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db5                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, "1", "2", "2…
$ au_db5_6_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db6                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 1, 1, NA,…
$ au_db7                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 1, 1, NA,…
$ au_db8                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 1, 2, NA,…
$ au_db9                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 1, 1, NA,…
$ q186                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q186_8_text           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb2                  &lt;chr&gt; "1,2,5", NA, NA, NA, NA, "1,2", "6", NA, NA, NA,…
$ psb3                  &lt;dbl&gt; 1, NA, NA, NA, NA, 4, 4, NA, NA, NA, NA, NA, NA,…
$ psb4                  &lt;dbl&gt; 1, NA, NA, NA, NA, 4, 4, NA, NA, NA, NA, NA, NA,…
$ psb5                  &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ psb6                  &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ psb8                  &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ psb9                  &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…
$ psb10                 &lt;dbl&gt; 2, NA, NA, NA, NA, 2, 2, NA, NA, NA, NA, NA, NA,…
$ psb10_only_one        &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb11_only_one        &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb11_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb12_only_one        &lt;dbl&gt; 4, NA, NA, NA, NA, 4, NA, NA, NA, NA, NA, NA, NA…
$ psb12_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q211                  &lt;chr&gt; "1", NA, NA, NA, NA, "1", "2", NA, NA, NA, NA, N…
$ q211_7_text           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb13                 &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ q198_1                &lt;dbl&gt; 0, NA, NA, NA, NA, 0, 99, NA, NA, NA, NA, NA, NA…
$ psb14_only_one_1      &lt;dbl&gt; 0, NA, NA, NA, NA, 0, 97, NA, NA, NA, NA, NA, NA…
$ psb13_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb_selfdrunk_tried_1 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb14_tried_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_10_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_tried           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_tried_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16                 &lt;dbl&gt; 0, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA…
$ psb16_10_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_tried_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_2               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_3               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_4               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_5               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb18_to_23_1         &lt;dbl&gt; 10, NA, NA, NA, NA, 6, NA, NA, NA, NA, NA, NA, N…
$ psb18_to_23_2         &lt;dbl&gt; 10, NA, NA, NA, NA, 4, NA, NA, NA, NA, NA, NA, N…
$ psb18_to_23_3         &lt;dbl&gt; 10, NA, NA, NA, NA, 10, NA, NA, NA, NA, NA, NA, …
$ q141_1                &lt;dbl&gt; 10, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, N…
$ q141_2                &lt;dbl&gt; 10, NA, NA, NA, NA, 10, NA, NA, NA, NA, NA, NA, …
$ q141_3                &lt;dbl&gt; 10, NA, NA, NA, NA, 10, NA, NA, NA, NA, NA, NA, …
$ pbs28_31_1            &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ pbs28_31_2            &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ pbs28_31_3            &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ pbs28_31_4            &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb24_to_27_1         &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb24_to_27_2         &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb24_to_27_3         &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb24_to_27_4         &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb32_1               &lt;dbl&gt; 5, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA…
$ psb33_1               &lt;dbl&gt; 1, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_1     &lt;dbl&gt; 4, NA, NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_2     &lt;dbl&gt; 0, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_3     &lt;dbl&gt; 0, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_4     &lt;dbl&gt; 0, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_5     &lt;dbl&gt; 0, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_6     &lt;dbl&gt; 0, NA, NA, NA, NA, 0, NA, NA, NA, NA, NA, NA, NA…
$ psb34_1_to_34_5_7     &lt;dbl&gt; 4, NA, NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA…
$ psb34                 &lt;dbl&gt; 2, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA…
$ psb35                 &lt;dbl&gt; 2, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA…
$ psb36                 &lt;dbl&gt; 2, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA…
$ psb37                 &lt;dbl&gt; 2, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA…
$ osbb2                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, "5", NA, NA, "4,…
$ osbb2_13_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb3                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, 2, 2,…
$ osbb4                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, 1, 1,…
$ osbb5                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1…
$ osbb6                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, "0", NA, NA, "0"…
$ osbb6_5_text          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb7                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb7_5_text          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb8                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, 1, 2,…
$ osbb9                 &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb10_11             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb10_11_10_text     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb12_to_13_1        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb12_to_13_2        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb14                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, 2, 2,…
$ osbb15                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb15_5_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb16_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1…
$ osbb17_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 3…
$ osbb18_1_to_5_1       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_3       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_4       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_5       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_6       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_7       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb19                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1…
$ osbb20                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1…
$ osbb21                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1…
$ osbb22                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 2…
$ ssab2                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1…
$ ssab3                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, "1,4", NA, NA, NA, N…
$ ssab3_8_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab4                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, 1…
$ ssab5                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1…
$ ssab6_7               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab6_7_10_text       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab8_to_9_1          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 5, NA, NA, NA, NA, 5…
$ ssab8_to_9_2          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 3, NA, NA, NA, NA, 6…
$ ssab10_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab11_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, 3…
$ ssab12_1_to_5_1       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, 3…
$ ssab12_1_to_5_2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 4, NA, NA, NA, NA, 4…
$ ssab12_1_to_5_3       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1…
$ ssab12_1_to_5_4       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 2…
$ ssab12_1_to_5_5       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1…
$ ssab12_1_to_5_6       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1…
$ ssab12_1_to_5_7       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 3, NA, NA, NA, NA, 1…
$ ssab13                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 1…
$ ssab14                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, 1…
$ ssab15                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, 1…
$ ssab16                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, 2…
$ q215                  &lt;chr&gt; NA, NA, NA, NA, "8", NA, NA, NA, NA, NA, NA, NA,…
$ q215_8_text           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_4                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q195                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q196_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q202                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q202_36_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q208                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q208_35_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q210                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q210_34_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q179                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q180                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q181                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ mis1                  &lt;dbl&gt; 2, 2, 2, 2, NA, 1, NA, 1, NA, 2, 3, NA, NA, 1, 2…
$ mis2                  &lt;dbl&gt; 2, 1, 1, 2, NA, 2, NA, 2, NA, 3, 1, NA, NA, 1, 2…
$ mis3                  &lt;dbl&gt; 2, 1, 2, 2, NA, 4, NA, 1, NA, 3, 3, NA, NA, 2, 2…
$ mis4                  &lt;dbl&gt; 2, 2, 2, 2, NA, 1, NA, 1, NA, 1, 3, NA, NA, 1, 2…
$ phq8_1_fu             &lt;dbl&gt; 0, 2, 0, 2, NA, 0, NA, 1, NA, 0, 0, NA, NA, 0, 0…
$ phq8_2_fu             &lt;dbl&gt; 1, 2, 2, 2, NA, 0, NA, 0, NA, 0, 2, NA, NA, 0, 0…
$ phq8_3_fu             &lt;dbl&gt; 1, 2, 2, 2, NA, 0, NA, 1, NA, 0, 2, NA, NA, 1, 0…
$ phq8_4_fu             &lt;dbl&gt; 1, 2, 2, 2, NA, 2, NA, 1, NA, 0, 2, NA, NA, 0, 0…
$ gad_fu_nervous        &lt;dbl&gt; 1, 2, 2, 2, NA, 1, NA, 0, NA, 0, 2, NA, NA, 0, 0…
$ gad_fu_notabletostop  &lt;dbl&gt; 0, 2, 2, 2, NA, 0, NA, 1, NA, 0, 2, NA, NA, 1, 0…
$ b1                    &lt;dbl&gt; 5, 5, 5, 5, NA, 0, NA, 0, NA, 0, 1, NA, NA, 0, 0…
$ c2                    &lt;dbl&gt; 5, 5, 5, 5, NA, 0, NA, 0, NA, 0, 2, NA, NA, 0, 0…
$ d2                    &lt;dbl&gt; 5, 5, 5, 5, NA, 1, NA, 0, NA, 0, 3, NA, NA, 0, 0…
$ e4                    &lt;dbl&gt; 5, 5, 5, 5, NA, 0, NA, 0, NA, 0, 1, NA, NA, 0, 0…</code></pre>
</div>
</div>
<p>Duplicates by nid</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># total duplicates</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid) <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 92 × 2
# Groups:   nid [92]
       nid     n
     &lt;dbl&gt; &lt;int&gt;
 1 9478839    18
 2 6208949    17
 3 5462581    10
 4 8617355     9
 5 7459356     8
 6 8057415     8
 7 3256800     6
 8 3279665     6
 9 4101260     6
10 6165526     6
# ℹ 82 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># days with duplicates</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid) <span class="sc">%&gt;%</span> </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 92 × 2
# Groups:   nid [92]
       nid     n
     &lt;dbl&gt; &lt;int&gt;
 1 9478839     9
 2 6208949     7
 3 5462581     4
 4 7459356     4
 5 8057415     4
 6 8617355     4
 7 3256800     3
 8 3279665     3
 9 4101260     3
10 6165526     3
# ℹ 82 more rows</code></pre>
</div>
</div>
<p>99 duplicates remaining</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 99 × 3
            pid date           n
          &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;
 1 101922110450 2022-11-01     3
 2 101922141125 2022-10-21     3
 3 102322233822 2022-11-15     3
 4 101922110450 2022-10-24     2
 5 101922110450 2022-10-30     2
 6 101922110450 2022-11-07     2
 7 101922130136 2022-10-20     2
 8 101922135243 2022-10-20     2
 9 101922140746 2022-10-23     2
10 101922140746 2022-10-24     2
11 101922140746 2022-10-25     2
12 101922140746 2022-10-26     2
13 101922141904 2022-11-03     2
14 101922141904 2022-11-12     2
15 101922142835 2022-10-23     2
16 101922142835 2022-11-05     2
17 101922143628 2022-10-30     2
18 101922143628 2022-11-07     2
19 101922153307 2022-10-28     2
20 101922153946 2022-10-28     2
21 101922155342 2022-10-22     2
22 101922155342 2022-11-08     2
23 101922161011 2022-11-05     2
24 101922161011 2022-11-15     2
25 101922171124 2022-10-24     2
26 101922182323 2022-11-09     2
27 101922185710 2022-10-21     2
28 101922193304 2022-10-30     2
29 101922193841 2022-11-02     2
30 101922201514 2022-11-14     2
31 101922210432 2022-10-24     2
32 101922213135 2022-10-23     2
33 101922213251 2022-10-29     2
34 101922224249 2022-10-27     2
35 101922224249 2022-11-01     2
36 101922224249 2022-11-02     2
37 101922224249 2022-11-15     2
38 101922224506 2022-10-31     2
39 102022065548 2022-10-22     2
40 102022110515 2022-11-14     2
41 102022110515 2022-11-17     2
42 102022122607 2022-10-21     2
43 102022122815 2022-10-29     2
44 102022152756 2022-10-22     2
45 102022154346 2022-10-21     2
46 102022154346 2022-10-28     2
47 102022154346 2022-10-29     2
48 102022154346 2022-11-03     2
49 102022154346 2022-11-04     2
50 102022154346 2022-11-10     2
51 102022154346 2022-11-17     2
52 102022171129 2022-10-28     2
53 102122092657 2022-11-02     2
54 102222211933 2022-11-13     2
55 102322102033 2022-11-08     2
56 102322102033 2022-11-13     2
57 102322162025 2022-11-12     2
58 102322233822 2022-11-02     2
59 102322233822 2022-11-05     2
60 102322233822 2022-11-16     2
61 102322233822 2022-11-17     2
62 102322233822 2022-11-18     2
63 102322233822 2022-11-19     2
64 102422094258 2022-11-01     2
65 102422103204 2022-10-30     2
66 102422103204 2022-11-15     2
67 102422105757 2022-11-01     2
68 102422105757 2022-11-04     2
69 102422110537 2022-10-26     2
70 102422121012 2022-11-10     2
71 102422121135 2022-11-10     2
72 102422121135 2022-11-14     2
73 102422123933 2022-11-05     2
74 102422135924 2022-10-26     2
75 102422152802 2022-11-03     2
76 102422153147 2022-11-04     2
77 102422165350 2022-11-19     2
78 102422191410 2022-11-20     2
79 102422195102 2022-10-26     2
80 102422195102 2022-11-06     2
81 102422204257 2022-10-30     2
82 102422210147 2022-11-05     2
83 102422210147 2022-11-07     2
84 102522173806 2022-10-26     2
85 102622174507 2022-11-03     2
86 102722110650 2022-11-05     2
87 102722110650 2022-11-18     2
88 103022095538 2022-11-20     2
89 110122104427 2022-11-02     2
90 110122110748 2022-11-16     2
91 110122114201 2022-11-14     2
92 110122144106 2022-11-06     2
93 110122144652 2022-11-03     2
94 110122165514 2022-11-11     2
95 110122233630 2022-11-13     2
96 110122233630 2022-11-24     2
97 110422125136 2022-11-17     2
98 110622104537 2022-11-15     2
99 110622210647 2022-11-28     2</code></pre>
</div>
</div>
<hr>
<p>Manually inspected remaining duplicates</p>
<p>Check how much time between duplicate surveys</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">time_between_dups =</span> <span class="fu">max</span>(start_date) <span class="sc">-</span> <span class="fu">min</span>(start_date)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(time_between_dups) <span class="sc">%&gt;%</span> </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'nid'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 99 × 3
# Groups:   nid [64]
       nid date       time_between_dups
     &lt;dbl&gt; &lt;date&gt;     &lt;drtn&gt;           
 1 6691463 2022-10-28    35 secs       
 2 9763528 2022-11-01    37 secs       
 3 8057415 2022-11-15    38 secs       
 4 1419718 2022-10-28    41 secs       
 5 2543679 2022-11-03    41 secs       
 6 9478839 2022-11-04    43 secs       
 7 1215369 2022-11-15    44 secs       
 8 7971058 2022-11-03    44 secs       
 9 3256800 2022-11-10    46 secs       
10 9478839 2022-11-10    46 secs       
11 6616681 2022-11-11    48 secs       
12 8057415 2022-11-01    48 secs       
13 9478839 2022-11-03    48 secs       
14 2050073 2022-11-08    51 secs       
15 9478839 2022-10-29    51 secs       
16 7036968 2022-11-20    54 secs       
17 6208949 2022-11-19    55 secs       
18 7924523 2022-11-12    56 secs       
19 9478839 2022-11-17    57 secs       
20 9763528 2022-11-04    60 secs       
21 5534031 2022-11-05    61 secs       
22 6927064 2022-10-20    66 secs       
23 4101260 2022-10-30    67 secs       
24 7459356 2022-11-18    68 secs       
25 7499319 2022-10-29    71 secs       
26 5928888 2022-10-24    73 secs       
27 6519689 2022-11-07    83 secs       
28 4133427 2022-11-17    87 secs       
29 9478839 2022-10-28    87 secs       
30 6519689 2022-11-05    89 secs       
31 2367248 2022-10-30    95 secs       
32 2540837 2022-10-26    99 secs       
33 6488958 2022-10-22   105 secs       
34 3529631 2022-11-16   111 secs       
35 4520468 2022-11-03   134 secs       
36 9966866 2022-11-28   138 secs       
37 5534031 2022-10-23   140 secs       
38 8617355 2022-11-01   143 secs       
39 1215369 2022-11-05   159 secs       
40 2050073 2022-11-13   160 secs       
41 6165526 2022-11-02   171 secs       
42 9478839 2022-10-21   172 secs       
43 2119083 2022-10-26   198 secs       
44 1661366 2022-10-22   214 secs       
45 9875942 2022-11-14   216 secs       
46 6208949 2022-11-18   226 secs       
47 7689849 2022-11-20   234 secs       
48 4101260 2022-11-07   308 secs       
49 3279665 2022-11-04   309 secs       
50 3992191 2022-10-26   313 secs       
51 2408372 2022-10-21   448 secs       
52 7459356 2022-11-05   641 secs       
53 5462581 2022-10-23  2445 secs       
54 5462581 2022-10-25  4314 secs       
55 6208949 2022-11-17  4875 secs       
56 5692139 2022-11-19  5291 secs       
57 8057415 2022-10-27  6044 secs       
58 6820558 2022-11-15  8249 secs       
59 8294237 2022-10-21  9427 secs       
60 2460338 2022-11-12 10079 secs       
61 9120911 2022-11-01 10100 secs       
62 5462581 2022-10-26 11530 secs       
63 6208949 2022-11-02 13774 secs       
64 3130104 2022-10-28 15103 secs       
65 5462581 2022-10-24 15562 secs       
66 8057415 2022-11-02 17262 secs       
67 5462663 2022-10-20 18403 secs       
68 6208949 2022-11-05 18980 secs       
69 6208949 2022-11-16 19558 secs       
70 8617355 2022-10-30 20230 secs       
71 8061889 2022-10-24 20516 secs       
72 6263279 2022-10-30 20968 secs       
73 1083617 2022-11-24 22039 secs       
74 2940696 2022-11-02 22439 secs       
75 1697880 2022-10-22 22633 secs       
76 4106122 2022-10-23 23624 secs       
77 6208949 2022-11-15 24343 secs       
78 8617355 2022-11-07 24360 secs       
79 1836643 2022-11-06 25095 secs       
80 4990422 2022-11-10 25856 secs       
81 1697880 2022-11-08 26610 secs       
82 3402989 2022-10-29 26941 secs       
83 2342070 2022-11-06 27881 secs       
84 7427277 2022-11-14 28165 secs       
85 6263279 2022-11-15 28195 secs       
86 8617355 2022-10-24 28437 secs       
87 2342070 2022-10-26 29205 secs       
88 4145153 2022-11-09 29436 secs       
89 3256800 2022-11-14 30545 secs       
90 2408889 2022-10-21 31387 secs       
91 1636530 2022-11-02 32301 secs       
92 1083617 2022-11-13 32404 secs       
93 7924523 2022-11-03 33718 secs       
94 9102026 2022-10-30 35043 secs       
95 7569921 2022-11-17 39588 secs       
96 5576329 2022-10-31 39823 secs       
97 2564475 2022-11-13 40048 secs       
98 4133427 2022-11-14 40224 secs       
99 6681525 2022-11-05 45222 secs       </code></pre>
</div>
</div>
<p>Look at duplicates more than 3 hours apart (3600 seconds = 1 hour)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">time_between_dups =</span> <span class="fu">max</span>(start_date) <span class="sc">-</span> <span class="fu">min</span>(start_date)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(time_between_dups) <span class="sc">%&gt;%</span> </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time_between_dups <span class="sc">&gt;</span> <span class="dv">10800</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'nid'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 × 3
# Groups:   nid [28]
       nid date       time_between_dups
     &lt;dbl&gt; &lt;date&gt;     &lt;drtn&gt;           
 1 5462581 2022-10-26 11530 secs       
 2 6208949 2022-11-02 13774 secs       
 3 3130104 2022-10-28 15103 secs       
 4 5462581 2022-10-24 15562 secs       
 5 8057415 2022-11-02 17262 secs       
 6 5462663 2022-10-20 18403 secs       
 7 6208949 2022-11-05 18980 secs       
 8 6208949 2022-11-16 19558 secs       
 9 8617355 2022-10-30 20230 secs       
10 8061889 2022-10-24 20516 secs       
11 6263279 2022-10-30 20968 secs       
12 1083617 2022-11-24 22039 secs       
13 2940696 2022-11-02 22439 secs       
14 1697880 2022-10-22 22633 secs       
15 4106122 2022-10-23 23624 secs       
16 6208949 2022-11-15 24343 secs       
17 8617355 2022-11-07 24360 secs       
18 1836643 2022-11-06 25095 secs       
19 4990422 2022-11-10 25856 secs       
20 1697880 2022-11-08 26610 secs       
21 3402989 2022-10-29 26941 secs       
22 2342070 2022-11-06 27881 secs       
23 7427277 2022-11-14 28165 secs       
24 6263279 2022-11-15 28195 secs       
25 8617355 2022-10-24 28437 secs       
26 2342070 2022-10-26 29205 secs       
27 4145153 2022-11-09 29436 secs       
28 3256800 2022-11-14 30545 secs       
29 2408889 2022-10-21 31387 secs       
30 1636530 2022-11-02 32301 secs       
31 1083617 2022-11-13 32404 secs       
32 7924523 2022-11-03 33718 secs       
33 9102026 2022-10-30 35043 secs       
34 7569921 2022-11-17 39588 secs       
35 5576329 2022-10-31 39823 secs       
36 2564475 2022-11-13 40048 secs       
37 4133427 2022-11-14 40224 secs       
38 6681525 2022-11-05 45222 secs       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">time_between_dups =</span> <span class="fu">max</span>(start_date) <span class="sc">-</span> <span class="fu">min</span>(start_date)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time_between_dups <span class="sc">&gt;</span> <span class="dv">10800</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(duplicates, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nid, date, response_id, progress, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'nid'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 77
Columns: 194
$ nid                   &lt;dbl&gt; 1083617, 1083617, 1083617, 1083617, 1636530, 163…
$ date                  &lt;date&gt; 2022-11-13, 2022-11-13, 2022-11-24, 2022-11-24,…
$ response_id           &lt;chr&gt; "R_d0WuHXIYc3QHGyl", "R_XLmafrkiyofjB4t", "R_2OS…
$ progress              &lt;dbl&gt; 100, 100, 100, 100, 100, 100, 100, 100, 100, 37,…
$ time_between_dups     &lt;drtn&gt; 32404 secs, 32404 secs, 22039 secs, 22039 secs,…
$ pid                   &lt;dbl&gt; 110122233630, 110122233630, 110122233630, 110122…
$ n                     &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ start_date            &lt;dttm&gt; 2022-11-13 12:31:33, 2022-11-13 21:31:37, 2022-…
$ end_date              &lt;dttm&gt; 2022-11-13 12:32:15, 2022-11-13 21:32:11, 2022-…
$ status                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ ip_address            &lt;chr&gt; "172.225.24.65", "104.28.104.62", "172.225.216.2…
$ duration_in_seconds   &lt;dbl&gt; 42, 34, 60, 29, 44, 37, 121, 45, 59, 26, 39, 47,…
$ finished              &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, …
$ recorded_date         &lt;dttm&gt; 2022-11-13 12:32:15, 2022-11-13 21:32:12, 2022-…
$ recipient_last_name   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ recipient_first_name  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ recipient_email       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ external_reference    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ location_latitude     &lt;dbl&gt; 43.0782, 43.0782, 41.8874, 41.8874, 43.0782, 43.…
$ location_longitude    &lt;dbl&gt; -89.4075, -89.4075, -87.6318, -87.6318, -89.4075…
$ distribution_channel  &lt;chr&gt; "anonymous", "anonymous", "anonymous", "anonymou…
$ user_language         &lt;chr&gt; "EN", "EN", "EN", "EN", "EN", "EN", "EN", "EN", …
$ au_db1                &lt;dbl&gt; 3, 3, 3, 3, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 1, 1, …
$ psb1                  &lt;dbl&gt; 3, 3, 3, 3, 2, 2, 2, 2, 2, 3, 2, 2, 1, 1, 2, 2, …
$ osbb1                 &lt;dbl&gt; 3, 3, 3, 3, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2, …
$ ssab1                 &lt;dbl&gt; 3, 3, 3, 3, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 2, …
$ drugs_screen_fu       &lt;dbl&gt; 4, 4, 4, 4, 2, 2, 1, 2, 2, 4, 2, 2, 2, 1, 2, 2, …
$ bpa1                  &lt;dbl&gt; 4, 4, 4, 4, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ porn_screen_fu        &lt;dbl&gt; 3, 3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, …
$ au_db2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db4                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db4_7_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db5                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db5_6_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db6                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db7                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db8                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ au_db9                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q186                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q186_8_text           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb2                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb3                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb4                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb5                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb6                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb8                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb9                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb10                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb10_only_one        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb11_only_one        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb11_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb12_only_one        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb12_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q211                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q211_7_text           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb13                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q198_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb14_only_one_1      &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb13_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb_selfdrunk_tried_1 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb14_tried_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_10_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_tried           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb15_tried_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_10_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_tried           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb16_tried_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_2               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_3               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_4               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs17_5               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb18_to_23_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb18_to_23_2         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb18_to_23_3         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q141_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q141_2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q141_3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs28_31_1            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs28_31_2            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs28_31_3            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ pbs28_31_4            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb24_to_27_1         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb24_to_27_2         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb24_to_27_3         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb24_to_27_4         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb32_1               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb33_1               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_1     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_2     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_3     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_4     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_5     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_6     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34_1_to_34_5_7     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb34                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb35                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb36                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ psb37                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb2                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb2_13_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb3                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb4                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb5                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb6                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb6_5_text          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb7                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb7_5_text          &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb8                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb9                 &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb10_11             &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb10_11_10_text     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb12_to_13_1        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb12_to_13_2        &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb14                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb15                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb15_5_text         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb16_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb17_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_1       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_3       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_4       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_5       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_6       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb18_1_to_5_7       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb19                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb20                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb21                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ osbb22                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab2                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab3                 &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab3_8_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab4                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab5                 &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab6_7               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab6_7_10_text       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab8_to_9_1          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab8_to_9_2          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab10_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab11_1              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_1       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_2       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_3       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_4       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_5       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_6       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab12_1_to_5_7       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab13                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab14                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab15                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ ssab16                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q215                  &lt;chr&gt; NA, NA, NA, NA, NA, NA, "1", NA, NA, NA, NA, NA,…
$ q215_8_text           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q212_4                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q195                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, N…
$ q196_1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, N…
$ q202                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 2535, NA, NA, NA, NA, NA…
$ q202_36_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q208                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 317, NA, NA, NA, NA, NA,…
$ q208_35_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q210                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 7, NA, NA, NA, NA, NA, N…
$ q210_34_text          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ q179                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, N…
$ q180                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, N…
$ q181                  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, NA, NA, N…
$ mis1                  &lt;dbl&gt; 3, 1, 3, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, …
$ mis2                  &lt;dbl&gt; 3, 1, 3, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, …
$ mis3                  &lt;dbl&gt; 3, 1, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 4, 3, …
$ mis4                  &lt;dbl&gt; 3, 1, 3, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ phq8_1_fu             &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ phq8_2_fu             &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, …
$ phq8_3_fu             &lt;dbl&gt; 1, 1, 1, 0, 2, 1, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, …
$ phq8_4_fu             &lt;dbl&gt; 1, 1, 1, 0, 1, 2, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, …
$ gad_fu_nervous        &lt;dbl&gt; 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, …
$ gad_fu_notabletostop  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, …
$ b1                    &lt;dbl&gt; 0, 0, 0, 0, 5, 5, 0, 0, 0, NA, 0, 0, 5, 5, 5, 5,…
$ c2                    &lt;dbl&gt; 0, 0, 0, 0, 5, 5, 5, 0, 0, NA, 0, 0, 5, 5, 5, 5,…
$ d2                    &lt;dbl&gt; 0, 0, 0, 0, 5, 5, 0, 0, 0, NA, 0, 0, 5, 5, 5, 5,…
$ e4                    &lt;dbl&gt; 0, 0, 0, 0, 5, 5, 0, 0, 0, NA, 0, 0, 5, 5, 5, 5,…
$ ssid                  &lt;dbl&gt; 101521080444, 101521080444, 101521080444, 101521…
$ sms                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ day                   &lt;dbl&gt; 11, 11, 22, 22, 12, 12, 3, 3, 20, 20, 5, 5, 2, 2…
$ sig                   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ r_date                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ time                  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ rt                    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ time_zone             &lt;dbl&gt; -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, …
$ rid                   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"R_117vFnoNfgFOk4D"</span>, <span class="st">"R_d0WuHXIYc3QHGyl"</span>,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_2OSU9MciQO5OGhT"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If progress &lt; 100 and another is 100 remove &lt; 100 duplicate</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>response_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"R_3PzBQDOn70O3RHN"</span>, <span class="st">"R_2VgBsuP6FAg18p7"</span>, </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_2ZQxY4bcYnHkKVT"</span>, <span class="st">"R_2ANi9iaiZrRiK7W"</span>,</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_zYcdQAFTkd4Wf85"</span>, <span class="st">"R_2RUMEtkgHOoKiU9"</span>,</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_0HP8PsuElUEqq4N"</span>, <span class="st">"R_2DZw0MQSQ4Zv2M6"</span>,</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_1Dqyd9EAWF6zkGf"</span>, <span class="st">"R_12KJL68mIqMDtil"</span>,</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_3szg3OAQjR1LWAS"</span>, <span class="st">"R_2t36lXAL1Zxe8VG"</span>,</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_ZIBMUETiZP7IX2F"</span>, <span class="st">"R_1JDaJzJxE3tFhJM"</span>,</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_2s0dOdGygUSWdln"</span>, <span class="st">"R_2ysynCwzs7kOGy7"</span>,</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>                             <span class="st">"R_cIyJ7yF1Re01kC5"</span>, <span class="st">"R_3MPXwxSXDlhGQaI"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 3
       nid date           n
     &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;
 1 1215369 2022-11-05     2
 2 1215369 2022-11-15     2
 3 1419718 2022-10-28     2
 4 1636530 2022-11-02     2
 5 1661366 2022-10-22     2
 6 1697880 2022-10-22     2
 7 1836643 2022-11-06     2
 8 2050073 2022-11-08     2
 9 2050073 2022-11-13     2
10 2342070 2022-10-26     2
11 2342070 2022-11-06     2
12 2367248 2022-10-30     2
13 2408372 2022-10-21     2
14 2460338 2022-11-12     2
15 2540837 2022-10-26     2
16 2543679 2022-11-03     2
17 2564475 2022-11-13     2
18 3256800 2022-11-10     2
19 3256800 2022-11-14     2
20 3279665 2022-11-04     2
21 3402989 2022-10-29     2
22 3992191 2022-10-26     2
23 4101260 2022-10-30     2
24 4101260 2022-11-07     2
25 4106122 2022-10-23     2
26 4133427 2022-11-14     2
27 4145153 2022-11-09     2
28 4990422 2022-11-10     2
29 5462581 2022-10-23     2
30 5462581 2022-10-24     2
31 5462581 2022-10-25     2
32 5462581 2022-10-26     2
33 5534031 2022-10-23     2
34 5534031 2022-11-05     2
35 5576329 2022-10-31     2
36 5928888 2022-10-24     2
37 6165526 2022-11-02     2
38 6208949 2022-11-02     2
39 6208949 2022-11-05     2
40 6208949 2022-11-15     2
41 6208949 2022-11-16     2
42 6208949 2022-11-17     2
43 6208949 2022-11-18     2
44 6208949 2022-11-19     2
45 6263279 2022-10-30     2
46 6263279 2022-11-15     2
47 6488958 2022-10-22     2
48 6519689 2022-11-05     2
49 6616681 2022-11-11     2
50 6681525 2022-11-05     2
51 6691463 2022-10-28     2
52 6820558 2022-11-15     2
53 7036968 2022-11-20     2
54 7427277 2022-11-14     2
55 7459356 2022-11-05     2
56 7499319 2022-10-29     2
57 7569921 2022-11-17     2
58 7689849 2022-11-20     2
59 7924523 2022-11-03     2
60 7971058 2022-11-03     2
61 8057415 2022-10-27     2
62 8057415 2022-11-01     2
63 8057415 2022-11-02     2
64 8057415 2022-11-15     2
65 8617355 2022-10-24     2
66 8617355 2022-10-30     2
67 8617355 2022-11-01     2
68 8617355 2022-11-07     2
69 9102026 2022-10-30     2
70 9120911 2022-11-01     2
71 9478839 2022-10-21     2
72 9478839 2022-10-28     2
73 9478839 2022-10-29     2
74 9478839 2022-11-03     2
75 9478839 2022-11-04     2
76 9478839 2022-11-10     2
77 9478839 2022-11-17     2
78 9763528 2022-11-01     2
79 9763528 2022-11-04     2
80 9875942 2022-11-14     2
81 9966866 2022-11-28     2</code></pre>
</div>
</div>
<p>For final ones, keep first survey (no way to determine which one is more accurate)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>first_surveys <span class="ot">&lt;-</span> duplicates <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((response_id <span class="sc">%in%</span> duplicates<span class="sc">$</span>response_id <span class="sc">&amp;</span> <span class="sc">!</span>response_id <span class="sc">%in%</span> first_surveys<span class="sc">$</span>response_id) <span class="sc">|</span> (response_id <span class="sc">%in%</span> data<span class="sc">$</span>response_id <span class="sc">&amp;</span> <span class="sc">!</span>response_id <span class="sc">%in%</span> duplicates<span class="sc">$</span>response_id))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All duplicates resolved</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"pid"</span>, <span class="st">"date"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(n)) </span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 3
# ℹ 3 variables: nid &lt;dbl&gt;, date &lt;date&gt;, n &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="check-number-of-surveys-per-unique-participant" class="level2">
<h2 class="anchored" data-anchor-id="check-number-of-surveys-per-unique-participant">Check number of surveys per unique participant</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nid) <span class="sc">%&gt;%</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> </span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 278 × 2
# Groups:   nid [278]
        nid     n
      &lt;dbl&gt; &lt;int&gt;
  1 1116912    28
  2 1233417    28
  3 1345823    28
  4 1380031    28
  5 1467855    28
  6 1511672    28
  7 1647832    28
  8 1825351    28
  9 1990323    28
 10 2342070    28
 11 2366456    28
 12 2408372    28
 13 2438808    28
 14 2460338    28
 15 2498010    28
 16 2533661    28
 17 2543679    28
 18 2556255    28
 19 2593949    28
 20 2599578    28
 21 2661324    28
 22 2670563    28
 23 2910945    28
 24 2940696    28
 25 3022217    28
 26 3172284    28
 27 3318722    28
 28 3327924    28
 29 3335799    28
 30 3529631    28
 31 3891409    28
 32 3992191    28
 33 3996167    28
 34 4145153    28
 35 4246865    28
 36 4446116    28
 37 4657804    28
 38 4806000    28
 39 5140108    28
 40 5192497    28
 41 5324913    28
 42 5331998    28
 43 5450114    28
 44 5651000    28
 45 6131734    28
 46 6165526    28
 47 6274396    28
 48 6421110    28
 49 6502474    28
 50 6519689    28
 51 6596593    28
 52 6599061    28
 53 6616681    28
 54 6691463    28
 55 6820558    28
 56 6984860    28
 57 7073507    28
 58 7116982    28
 59 7382649    28
 60 7405248    28
 61 7459356    28
 62 7508456    28
 63 7569921    28
 64 7632488    28
 65 7934390    28
 66 7971058    28
 67 8481865    28
 68 8678274    28
 69 8859146    28
 70 9027426    28
 71 9029525    28
 72 9062890    28
 73 9102026    28
 74 9128298    28
 75 9455308    28
 76 9717347    28
 77 9847438    28
 78 9873261    28
 79 9905778    28
 80 9972029    28
 81 1358998    27
 82 1402312    27
 83 1518803    27
 84 1643241    27
 85 1660041    27
 86 1836643    27
 87 2090184    27
 88 2429597    27
 89 2471256    27
 90 3130104    27
 91 3348257    27
 92 3402989    27
 93 3466068    27
 94 3527473    27
 95 3548894    27
 96 3747194    27
 97 3766694    27
 98 4101260    27
 99 4121794    27
100 4545276    27
101 4588229    27
102 4676616    27
103 4906782    27
104 5135079    27
105 5359974    27
106 5462581    27
107 5462663    27
108 5692139    27
109 5747934    27
110 5884387    27
111 6127959    27
112 6391320    27
113 6414583    27
114 6550244    27
115 6681525    27
116 6801994    27
117 6950592    27
118 7036968    27
119 7251162    27
120 7344696    27
121 7499319    27
122 7689849    27
123 8285764    27
124 8294237    27
125 8365590    27
126 8459076    27
127 8478156    27
128 8705240    27
129 8834697    27
130 8909302    27
131 8938378    27
132 9326580    27
133 9508298    27
134 9698357    27
135 9763528    27
136 9796314    27
137      NA    27
138 1083617    26
139 1208908    26
140 1215369    26
141 1697880    26
142 1709232    26
143 1723975    26
144 2351222    26
145 2367248    26
146 2531227    26
147 2564475    26
148 2638938    26
149 3106333    26
150 3187228    26
151 3244252    26
152 3279665    26
153 3313178    26
154 3533571    26
155 3697375    26
156 4076084    26
157 4520468    26
158 4618069    26
159 4848905    26
160 4961638    26
161 5694464    26
162 5982957    26
163 6208949    26
164 6636171    26
165 6927064    26
166 7109663    26
167 7160162    26
168 7408521    26
169 7766786    26
170 7895886    26
171 8841629    26
172 9243237    26
173 9328313    26
174 9889398    26
175 1636530    25
176 2040727    25
177 2186020    25
178 2656392    25
179 3521909    25
180 3532588    25
181 4427722    25
182 5248008    25
183 5578705    25
184 5629558    25
185 6008813    25
186 7427277    25
187 7931689    25
188 8062828    25
189 8617355    25
190 9740550    25
191 9796568    25
192 9966866    25
193 1224070    24
194 1571982    24
195 1661366    24
196 2148675    24
197 4098382    24
198 4388267    24
199 4511190    24
200 4802760    24
201 5463935    24
202 7643693    24
203 7961030    24
204 8061889    24
205 8890545    24
206 2246413    23
207 3138194    23
208 4435326    23
209 8387833    23
210 8938978    23
211 9478839    23
212 2050073    22
213 2883441    22
214 4287965    22
215 4990422    22
216 5576329    22
217 7119225    22
218 8786098    22
219 9120911    22
220 9693362    22
221 1428771    21
222 2408889    21
223 4133427    21
224 5331904    21
225 5625372    21
226 6488958    21
227 6541740    21
228 2540837    20
229 6191138    20
230 6263279    20
231 8311815    20
232 7255838    19
233 7924523    19
234 5534031    18
235 8057415    18
236 9875942    18
237 1850089    17
238 1948818    17
239 6003079    17
240 7925422    17
241 9724550    17
242 2231600    16
243 3722889    16
244 6063320    16
245 9740303    16
246 9792124    16
247 3915659    14
248 5805070    12
249 6082269    12
250 9226213    12
251 1419718    11
252 3256800    10
253 4444542    10
254 4599849    10
255 7515816    10
256 1523700     9
257 2119083     9
258 7505882     9
259 2612758     8
260 9149757     8
261 1402857     7
262 4106122     7
263 8525021     6
264 1902555     5
265 2852024     5
266 3346412     5
267 5570051     4
268 4511598     3
269 5485060     3
270 5691993     3
271 5928888     3
272 8422286     3
273 3377599     2
274 4163476     2
275 7138629     2
276 2538992     1
277 6891674     1
278 8219175     1</code></pre>
</div>
</div>
<section id="mean-number-of-surveys-completed-23.5" class="level3">
<h3 class="anchored" data-anchor-id="mean-number-of-surveys-completed-23.5">Mean number of surveys completed: 23.5</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(nid, <span class="at">name =</span> <span class="st">"n_surveys"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_completed =</span> <span class="fu">sum</span>(n_surveys),</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_possible  =</span> <span class="fu">n</span>() <span class="sc">*</span> <span class="dv">28</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_completed  =</span> <span class="fu">mean</span>(n_surveys),</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">completion_rate =</span> <span class="fu">mean</span>(n_surveys) <span class="sc">/</span> <span class="dv">28</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  total_completed total_possible mean_completed completion_rate
            &lt;int&gt;          &lt;dbl&gt;          &lt;dbl&gt;           &lt;dbl&gt;
1            6530           7784           23.5           0.839</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># double-check mean # of surveys </span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(nid) <span class="sc">%&gt;%</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_surveys_completed =</span> <span class="fu">mean</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  avg_surveys_completed
                  &lt;dbl&gt;
1                  23.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># median, SD, min, max </span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(nid, <span class="at">name =</span> <span class="st">"n_surveys"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_surveys =</span> <span class="fu">median</span>(n_surveys),</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_surveys     =</span> <span class="fu">sd</span>(n_surveys),</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_surveys    =</span> <span class="fu">min</span>(n_surveys),</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_surveys    =</span> <span class="fu">max</span>(n_surveys),</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_participants =</span> <span class="fu">n</span>()</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  median_surveys sd_surveys min_surveys max_surveys n_participants
           &lt;dbl&gt;      &lt;dbl&gt;       &lt;int&gt;       &lt;int&gt;          &lt;int&gt;
1             26       6.87           1          28            278</code></pre>
</div>
</div>
</section>
</section>
<section id="rename-variables-for-consistency" class="level2">
<h2 class="anchored" data-anchor-id="rename-variables-for-consistency">Rename variables for consistency</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">rename_variables</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="remove-unnecessary-variables" class="level2">
<h2 class="anchored" data-anchor-id="remove-unnecessary-variables">Remove unnecessary variables</h2>
<p>Either added during cleaning for checks or single value metadata columns</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(r_date, time, rt, rid, ssid, sms, sig,</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>            recipient_last_name, recipient_first_name, recipient_email,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>            external_reference, distribution_channel, user_language)) <span class="sc">%&gt;%</span> </span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(nid, date) <span class="sc">%&gt;%</span> </span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,530
Columns: 179
$ nid                 &lt;dbl&gt; 6891674, 9128298, 3533571, 3766694, 9972029, 87052…
$ date                &lt;date&gt; 2022-10-19, 2022-10-19, 2022-10-19, 2022-10-19, 2…
$ start_date          &lt;dttm&gt; 2022-10-19 10:11:09, 2022-10-19 11:10:25, 2022-10…
$ end_date            &lt;dttm&gt; 2022-10-19 10:13:50, 2022-10-19 11:11:32, 2022-10…
$ status              &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ ip_address          &lt;chr&gt; "72.33.2.202", "35.148.93.36", "72.33.2.165", "72.…
$ progress            &lt;dbl&gt; 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, …
$ duration_in_seconds &lt;dbl&gt; 160, 66, 84, 151, 103, 105, 66, 92, 121, 171, 484,…
$ finished            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
$ recorded_date       &lt;dttm&gt; 2022-10-19 10:13:50, 2022-10-19 11:11:32, 2022-10…
$ response_id         &lt;chr&gt; "R_0kqlvefI2O3z3cR", "R_2c1Nih6gyoqYPMo", "R_2scMD…
$ location_latitude   &lt;dbl&gt; 43.0782, 43.0812, 43.0782, 43.0782, 43.0782, 43.07…
$ location_longitude  &lt;dbl&gt; -89.4075, -89.3845, -89.4075, -89.4075, -89.4075, …
$ aub1                &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2,…
$ psb1                &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2,…
$ osb1                &lt;dbl&gt; 1, 2, 2, 2, 2, 2, 2, 2, 2, 1, 3, 2, 2, 2, 1, 2, 1,…
$ ssb1                &lt;dbl&gt; 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 1,…
$ dub1                &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 1, 2, 2, 1, 2, 2, 2, 2, 2, 2,…
$ bpa                 &lt;dbl&gt; 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 2, 2,…
$ pub1                &lt;dbl&gt; 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 3, 2, 2, 2, 2, 2, 1,…
$ au_t                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_v                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_l                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_loc.txt          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_pbs              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_pbs.txt          &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_pg               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_dg               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_bib              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_fib              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ au_drg              &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ q186_8_text         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb2                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "1,2,3,4",…
$ cub1                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ cub2                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ cub3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ cub4                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ cub5                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ cub6                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb3                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ psb4                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ psb5                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ psb5a               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb6                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, NA, NA,…
$ psb6a               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ str_p               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "1", NA, N…
$ str_p.txt           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb7                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ psb8                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ psb9                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ psb7a               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb8a               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb9a               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb10               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, "7", NA, N…
$ psb15_10_text       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb10a              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb15_tried_10_text &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb11               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ psb16_10_text       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb11a              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ psb16_tried_10_text &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ med1_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ med2_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ med3_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ med4_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ pls_pf              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 8, NA, NA,…
$ aro_pf              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10, NA, NA…
$ con_pf              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10, NA, NA…
$ ver_pc              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 10, NA, NA…
$ enon_pc             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ inon_pc             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ prp_v               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ prp_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ prp_sf              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ prp_in              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ vic_v               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ vic_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ vic_sf              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ vic_in              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ exp_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ st_p                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, NA, NA,…
$ exci_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ angr_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ dist_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ irri_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ empt_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ asha_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, NA, NA,…
$ calm_p              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, NA, NA,…
$ er1_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ er2_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA,…
$ er3_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ er4_p               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA,…
$ osb2                &lt;chr&gt; "4", NA, NA, NA, NA, NA, NA, NA, NA, "4", NA, NA, …
$ osb2.txt            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osb3                &lt;dbl&gt; 1, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, …
$ osb4                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, …
$ osb5                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA,…
$ osb6                &lt;chr&gt; "0", NA, NA, NA, NA, NA, NA, NA, NA, "0", NA, NA, …
$ osb6.txt            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osb7                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osbb7_5_text        &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osb8                &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, …
$ osb9                &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osb10               &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osbb10_11_10_text   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ aro_of              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ pls_of              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ pss                 &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, …
$ osbb15              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ osbb15_5_text       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ exp_o               &lt;dbl&gt; 1, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, …
$ str_o               &lt;dbl&gt; 3, NA, NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, …
$ pa1_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ na1_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ na2_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ na3_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ na4_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ pa2_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ na5_o               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ er1_o               &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, …
$ er2_o               &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, …
$ er3_o               &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, …
$ er4_o               &lt;dbl&gt; 2, NA, NA, NA, NA, NA, NA, NA, NA, 2, NA, NA, NA, …
$ ssb2                &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ ssb3                &lt;chr&gt; NA, NA, NA, "3", NA, NA, NA, NA, NA, NA, NA, NA, N…
$ ssb3.txt            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ssb4                &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ ssb5                &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ ssb6                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ ssab6_7_10_text     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ aro_sf              &lt;dbl&gt; NA, NA, NA, 7, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ pls_sf              &lt;dbl&gt; NA, NA, NA, 6, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ exp_s               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ str_s               &lt;dbl&gt; NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ pa1_s               &lt;dbl&gt; NA, NA, NA, 4, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ na1_s               &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ na2_s               &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ na3_s               &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ na4_s               &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ na5_s               &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ pa2_s               &lt;dbl&gt; NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ er1_s               &lt;dbl&gt; NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ er2_s               &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ er3_s               &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ er4_s               &lt;dbl&gt; NA, NA, NA, 2, NA, NA, NA, NA, NA, NA, NA, NA, NA,…
$ dub2                &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, "9", NA, NA, NA, NA, N…
$ dub2.txt            &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ med1_d              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ med2_d              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ med3_d              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ med4_d              &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA,…
$ exp_d               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ str_d               &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ dub3_bf             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 327, NA, N…
$ dub3_bf.txt         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ dub3_du             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 734, NA, N…
$ dub3_du.txt         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ dub3_af             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 733, NA, N…
$ dub3_af.txt         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ dub4                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ dub5                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ dub6                &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…
$ imp1                &lt;dbl&gt; 1, 1, 2, 3, 1, 1, 2, 3, 1, 2, 1, 1, 1, 1, NA, 1, N…
$ imp2                &lt;dbl&gt; 3, 1, 1, 3, 2, 4, 1, 1, 1, 3, 1, 3, 2, 1, NA, 3, N…
$ imp3                &lt;dbl&gt; 1, 3, 2, 2, 3, 3, 2, 3, 1, 1, 1, 1, 2, 4, NA, 2, N…
$ imp4                &lt;dbl&gt; 2, 1, 1, 4, 2, 1, 2, 2, 1, 1, 1, 1, 1, 1, NA, 1, N…
$ dep1                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 0, NA, 0, N…
$ dep2                &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, NA, 0, N…
$ insom               &lt;dbl&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, NA, 0, N…
$ fatig               &lt;dbl&gt; 2, 0, 0, 1, 0, 1, 0, 2, 1, 0, 3, 1, 1, 1, NA, 0, N…
$ anx1                &lt;dbl&gt; 0, 2, 1, 1, 1, 1, 0, 2, 0, 0, 2, 1, 1, 0, NA, 1, N…
$ anx2                &lt;dbl&gt; 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 2, 1, 0, 0, NA, 1, N…
$ traum1              &lt;dbl&gt; 5, 0, 2, 0, 0, 1, 0, 1, 0, 0, 5, 0, 0, 5, NA, 0, N…
$ traum2              &lt;dbl&gt; 5, 0, 1, 0, 0, 0, 0, 0, 0, 0, 5, 0, 1, 5, NA, 0, N…
$ traum3              &lt;dbl&gt; 5, 0, 0, 0, 0, 0, 0, 1, 0, 0, 5, 0, 0, 5, NA, 0, N…
$ traum4              &lt;dbl&gt; 5, 0, 0, 1, 0, 1, 0, 0, 0, 0, 5, 0, 0, 5, NA, 1, N…
$ pid                 &lt;dbl&gt; 101822130256, 101822173925, 101822125304, 10182219…
$ day                 &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1,…
$ time_zone           &lt;dbl&gt; -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6…</code></pre>
</div>
</div>
</section>
</section>
<section id="recoding-scoring-eda" class="level1">
<h1>Recoding, scoring, EDA</h1>
<p>Daily behavioral screeners:</p>
<p>1 = Yes, 0 = No, 3 = Prefer not to say</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(aub1<span class="sc">:</span>pub1, as.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(aub1<span class="sc">:</span>psb1, osb1<span class="sc">:</span>ssb1, pub1),</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>               <span class="sc">~</span><span class="fu">if_else</span>(.x <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">0</span>, .x)))</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span>  </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(dub1<span class="sc">:</span>bpa),</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>               <span class="sc">~</span><span class="fu">case_when</span>(. <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">0</span>, </span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>                          . <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>                          <span class="cn">TRUE</span> <span class="sc">~</span> .)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dichotomous variables</p>
<p>1 = Yes, 0 = No</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(au_pg, au_dg, psb3, psb5, psb5a, er1_p, er2_p, </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>      er3_p, er4_p, osb4, osb5, osb8, pss, er1_o, er2_o, </span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>      er3_o, er4_o, ssb2, er1_s, er2_s, er3_s, er4_s),</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">case_when</span>(</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>      . <span class="sc">==</span> <span class="st">"1"</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="co"># Yes</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>      . <span class="sc">==</span> <span class="st">"2"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="co"># No</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(.)</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="active-consent-cues" class="level2">
<h2 class="anchored" data-anchor-id="active-consent-cues">Active consent cues</h2>
<section id="verbal" class="level3">
<h3 class="anchored" data-anchor-id="verbal">Verbal</h3>
<p>To what extent did you do the following during the sexual activity?</p>
<p><code>ver_pc</code>: Directly asked your partner or communicated verbally with your partner about consent?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>ver_pc) <span class="co"># verbal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 5.63 4.12      7    5.79 4.45   0  10    10 -0.28     -1.6 0.18</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(ver_pc) <span class="sc">%&gt;%</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Verbal Cues"</span>,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Verbal Self-Report"</span>,</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="direct-nonverbal" class="level3">
<h3 class="anchored" data-anchor-id="direct-nonverbal">Direct nonverbal</h3>
<p>To what extent did you do the following during the sexual activity?<br>
</p>
<p><code>enon_pc</code>: Used direct non-verbal signals to communicate with your partner about consent for the sexual activity</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>enon_pc) <span class="co"># explicit nonverbal </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 7.05 3.43      8    7.56 2.97   0  10    10 -0.96     -0.4 0.15</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(enon_pc) <span class="sc">%&gt;%</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Direct Nonverbal"</span>,</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Direct Nonverbal Self-Report"</span>,</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="indirect-nonverbal" class="level3">
<h3 class="anchored" data-anchor-id="indirect-nonverbal">Indirect nonverbal</h3>
<p>To what extent did you do the following during the sexual activity?<br>
</p>
<p><code>inon_pc</code>: Used subtle signals to communicate with your partner about consent for the sexual activity?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>inon_pc) <span class="co"># implicit nonverbal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 6.78 3.64      8    7.23 2.97   0  10    10 -0.81    -0.84 0.16</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(inon_pc) <span class="sc">%&gt;%</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Indirect Nonverbal"</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Indirect Nonverbal Self-Report"</span>,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="nonverbal-corr" class="level3">
<h3 class="anchored" data-anchor-id="nonverbal-corr">Nonverbal corr</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">cor</span>(d<span class="sc">$</span>enon_pc, d<span class="sc">$</span>inon_pc, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.736</code></pre>
</div>
</div>
<p>The correlation between the <code>direct</code> and <code>indirect nonverbal</code> consent cue items was <em>r</em> = .736, indicating a strong positive relationship that suggests these items reflect a shared underlying construct. For parsimony and theoretical clarity, these items will be averaged to create a continuous composite score representing overall nonverbal consent communication.</p>
</section>
<section id="nonverbal-composite" class="level3">
<h3 class="anchored" data-anchor-id="nonverbal-composite">Nonverbal composite</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span>  <span class="co"># calculate mean score</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">non_verb =</span> <span class="fu">mean</span>(<span class="fu">c</span>(enon_pc,inon_pc)))</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>non_verb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 6.91 3.29      8    7.38 2.97   0  10    10 -0.85    -0.51 0.15</code></pre>
</div>
</div>
</section>
<section id="verbal---nonverbal-correlation" class="level3">
<h3 class="anchored" data-anchor-id="verbal---nonverbal-correlation">Verbal - Nonverbal Correlation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check correlation between verbal and nonverbal </span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">cor</span>(d<span class="sc">$</span>ver_pc, d<span class="sc">$</span>non_verb, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.134</code></pre>
</div>
</div>
</section>
</section>
<section id="type-of-sexual-behavior" class="level2">
<h2 class="anchored" data-anchor-id="type-of-sexual-behavior">Type of sexual behavior</h2>
<p><code>psb2</code>: What activities occurred? (check all that apply)</p>
<p>Response options:</p>
<ul>
<li>Kissing = 1;</li>
<li>Touching = 2;</li>
<li>Digital penetration (i.e., w/ fingers) = 3;</li>
<li>Oral sex = 4;</li>
<li>Vaginal sex = 5;</li>
<li>Anal sex = 6;</li>
<li>I tried but no sexual contact happened = 7</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb2) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb2
     .x[[i]]    n      percent valid_percent
           1   65 0.0099540582   0.123106061
         1,2  112 0.0171516080   0.212121212
       1,2,3   24 0.0036753446   0.045454545
     1,2,3,4   29 0.0044410413   0.054924242
   1,2,3,4,5  128 0.0196018377   0.242424242
 1,2,3,4,5,6    1 0.0001531394   0.001893939
   1,2,3,4,6    8 0.0012251149   0.015151515
     1,2,3,5   47 0.0071975498   0.089015152
   1,2,3,5,6    1 0.0001531394   0.001893939
     1,2,3,6    1 0.0001531394   0.001893939
       1,2,4   19 0.0029096478   0.035984848
     1,2,4,5   19 0.0029096478   0.035984848
     1,2,4,6    1 0.0001531394   0.001893939
       1,2,5   13 0.0019908116   0.024621212
       1,3,5    1 0.0001531394   0.001893939
       1,4,5    1 0.0001531394   0.001893939
         1,5    3 0.0004594181   0.005681818
           2   21 0.0032159265   0.039772727
         2,5    1 0.0001531394   0.001893939
       3,4,5    1 0.0001531394   0.001893939
         3,5    1 0.0001531394   0.001893939
           4    3 0.0004594181   0.005681818
           5    1 0.0001531394   0.001893939
           7   27 0.0041347626   0.051136364
        &lt;NA&gt; 6002 0.9191424196            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>psb_act <span class="ot">&lt;-</span> d<span class="sc">$</span>psb2</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">psb_act =</span> <span class="fu">as.character</span>(psb_act),</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">psb_act =</span> <span class="fu">case_when</span>(</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>           psb_act <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"1,2"</span>, <span class="st">"2"</span>) <span class="sc">~</span> <span class="st">"Contact"</span>,</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>           psb_act <span class="sc">==</span> <span class="st">"7"</span> <span class="sc">~</span> <span class="st">"Attempt"</span>,</span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>           <span class="fu">grepl</span>(<span class="st">"3"</span>, psb_act) <span class="sc">|</span> <span class="fu">grepl</span>(<span class="st">"4"</span>, psb_act) <span class="sc">|</span> </span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">grepl</span>(<span class="st">"5"</span>, psb_act) <span class="sc">|</span> <span class="fu">grepl</span>(<span class="st">"6"</span>, psb_act) <span class="sc">~</span> <span class="st">"Penetration"</span>,</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>           <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.character</span>(psb_act)))</span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb_act) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb_act
     .x[[i]]    n     percent valid_percent
     Attempt   27 0.004134763    0.05113636
     Contact  198 0.030321593    0.37500000
 Penetration  303 0.046401225    0.57386364
        &lt;NA&gt; 6002 0.919142420            NA</code></pre>
</div>
</div>
<p><code>psb_di</code> 0 = Attempted sexual contact; 1 = Contact and/or penetration</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>psb_di <span class="ot">&lt;-</span> d<span class="sc">$</span>psb_act</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span>   </span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(psb_di),</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span>dplyr<span class="sc">::</span><span class="fu">recode</span>(.,</span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Attempt"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Contact"</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"Penetration"</span> <span class="ot">=</span> <span class="dv">1</span>)))</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb_di) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb_di
 .x[[i]]    n     percent valid_percent
       0   27 0.004134763    0.05113636
       1  501 0.076722818    0.94886364
      NA 6002 0.919142420            NA</code></pre>
</div>
</div>
</section>
<section id="partner-gender" class="level2">
<h2 class="anchored" data-anchor-id="partner-gender">Partner gender</h2>
<p><code>psb4</code>: What was the gender of your partner?</p>
<p>Cisgender Man = 1; Cisgender Woman = 2; Trans, Queer, or Non-binary person = 3; Prefer not to say = 4; Not listed here = 5</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb4) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb4
 .x[[i]]    n      percent valid_percent
       1  296 0.0453292496   0.590818363
       2  195 0.0298621746   0.389221557
       3    2 0.0003062787   0.003992016
       4    5 0.0007656968   0.009980040
       5    3 0.0004594181   0.005988024
      NA 6029 0.9232771822            NA</code></pre>
</div>
</div>
</section>
<section id="sexual-precedence" class="level2">
<h2 class="anchored" data-anchor-id="sexual-precedence">Sexual precedence</h2>
<p><code>psb_5</code>: Had you ever had sexual contact with this person in the past?</p>
<p>No = 0; Yes = 1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb5) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb5
 .x[[i]]    n    percent valid_percent
       0   95 0.01454824     0.1896208
       1  406 0.06217458     0.8103792
      NA 6029 0.92327718            NA</code></pre>
</div>
</div>
</section>
<section id="partner-familiarity" class="level2">
<h2 class="anchored" data-anchor-id="partner-familiarity">Partner familiarity</h2>
<p><code>psb_6</code>: How did you know this other person?</p>
<p>I didn’t, we just met that day = 1; They are a friend = 2; They are an acquaintance = 3;<br>
They are my current or past dating/intimate partner = 4</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb6) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb6
 .x[[i]]    n     percent valid_percent
       1   41 0.006278714         0.082
       2   96 0.014701378         0.192
       3   27 0.004134763         0.054
       4  336 0.051454824         0.672
      NA 6030 0.923430322            NA</code></pre>
</div>
</div>
</section>
<section id="sexual-feelings" class="level2">
<h2 class="anchored" data-anchor-id="sexual-feelings">Sexual feelings</h2>
<section id="arousal" class="level3">
<h3 class="anchored" data-anchor-id="arousal">Arousal</h3>
<p>To what extent did you feel the following during the sexual activity?<br>
<code>aro_pf</code>: I felt aroused.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>aro_pf) <span class="co"># arousal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 6.92 3.19      8    7.34 2.97   0  10    10 -0.78    -0.63 0.14</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(psb_di <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(aro_pf) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Subjective Arousal"</span>,</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Arousal Self-Report"</span>,</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(aro_pf) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$aro_pf
 .x[[i]]    n     percent valid_percent
       0   26 0.003981623    0.05189621
       1   21 0.003215926    0.04191617
       2   26 0.003981623    0.05189621
       3   22 0.003369066    0.04391218
       4   16 0.002450230    0.03193613
       5   40 0.006125574    0.07984032
       6   32 0.004900459    0.06387226
       7   44 0.006738132    0.08782435
       8   71 0.010872894    0.14171657
       9   32 0.004900459    0.06387226
      10  171 0.026186830    0.34131737
      NA 6029 0.923277182            NA</code></pre>
</div>
</div>
</section>
<section id="pleasure" class="level3">
<h3 class="anchored" data-anchor-id="pleasure">Pleasure</h3>
<p>To what extent did you feel the following during the sexual activity?<br>
<code>pls_pf</code>: I felt pleasure</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>pls_pf) <span class="co"># pleasure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 7.24 2.84      8    7.66 2.97   0  10    10 -0.97     0.15 0.13</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(psb_di <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(aro_pf) <span class="sc">%&gt;%</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Subjective Pleasure"</span>,</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Pleasure Self-Report"</span>,</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="correlation" class="level3">
<h3 class="anchored" data-anchor-id="correlation">Correlation</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">cor</span>(d<span class="sc">$</span>aro_pf, d<span class="sc">$</span>pls_pf, <span class="at">use =</span> <span class="st">"pairwise.complete.obs"</span>), <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.828</code></pre>
</div>
</div>
</section>
<section id="composite" class="level3">
<h3 class="anchored" data-anchor-id="composite">Composite</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span>  <span class="co"># calculate mean score</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">psb_feel =</span> <span class="fu">mean</span>(<span class="fu">c</span>(pls_pf,aro_pf)))</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>psb_feel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 501 7.08 2.88    7.5    7.46 3.71   0  10    10 -0.81    -0.31 0.13</code></pre>
</div>
</div>
</section>
</section>
<section id="consent-appraisal" class="level2">
<h2 class="anchored" data-anchor-id="consent-appraisal">Consent appraisal</h2>
<p>To what extent did you feel the following during the sexual activity?<br>
<br>
<code>con_pf</code>: The sexual activity felt consensual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># psych::describe(d$con_pf) # consent evaluation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(psb_di <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(con_pf) <span class="sc">%&gt;%</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Consent Appraisals"</span>,</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"'Felt consensual' Self-Report"</span>,</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="substance-use" class="level2">
<h2 class="anchored" data-anchor-id="substance-use">Substance use</h2>
<section id="participant-drink-count" class="level3">
<h3 class="anchored" data-anchor-id="participant-drink-count">Participant drink count</h3>
<p><code>psb7</code>: How many drinks did you consume prior to or during this activity?</p>
<p>Response options: 0 = 1; 1-2 = 2, 3-4 = 3, 5-6 = 4, 7-9 = 5, 10+ = 6</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(psb_di <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(psb7) <span class="sc">%&gt;%</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Participant Drinks"</span>,</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Self-Reported Drink Count"</span>,</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Recode <code>psb_alc</code> from <code>psb7</code> such that 0 drinks = 0 and &gt;0 drinks = 1</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">psb_alc =</span> <span class="fu">if_else</span>(psb7 <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="fu">if_else</span>(psb7 <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="dv">1</span>, psb7)))</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb_alc) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb_alc
 .x[[i]]    n    percent valid_percent
       0  312 0.04777948         0.624
       1  188 0.02879020         0.376
      NA 6030 0.92343032            NA</code></pre>
</div>
</div>
<p>Participants endorsed 188 partnered sexual events following alcohol consumption.</p>
</section>
<section id="participant-intoxication" class="level3">
<h3 class="anchored" data-anchor-id="participant-intoxication">Participant intoxication</h3>
<p><code>psb8</code>: How intoxicated did you feel right before or during this sexual activity?</p>
<p>Least intoxicated ever felt in life (0) - Most intoxication ever felt in life (100) VAS</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb8) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb8
 .x[[i]]    n      percent valid_percent
       0  254 0.0388973966   0.504970179
       1   15 0.0022970904   0.029821074
       2   10 0.0015313936   0.019880716
       3    7 0.0010719755   0.013916501
       4    7 0.0010719755   0.013916501
       5    8 0.0012251149   0.015904573
       6    4 0.0006125574   0.007952286
       7    4 0.0006125574   0.007952286
       8    7 0.0010719755   0.013916501
       9    1 0.0001531394   0.001988072
      10    8 0.0012251149   0.015904573
      11    3 0.0004594181   0.005964215
      12    3 0.0004594181   0.005964215
      13    2 0.0003062787   0.003976143
      14    1 0.0001531394   0.001988072
      15    3 0.0004594181   0.005964215
      16    3 0.0004594181   0.005964215
      17    4 0.0006125574   0.007952286
      18    2 0.0003062787   0.003976143
      19    3 0.0004594181   0.005964215
      20    2 0.0003062787   0.003976143
      21    3 0.0004594181   0.005964215
      22    1 0.0001531394   0.001988072
      23    5 0.0007656968   0.009940358
      25    3 0.0004594181   0.005964215
      27    3 0.0004594181   0.005964215
      28    1 0.0001531394   0.001988072
      30   11 0.0016845329   0.021868787
      31    3 0.0004594181   0.005964215
      32    1 0.0001531394   0.001988072
      33    3 0.0004594181   0.005964215
      34    2 0.0003062787   0.003976143
      35    3 0.0004594181   0.005964215
      36    5 0.0007656968   0.009940358
      38    4 0.0006125574   0.007952286
      39    1 0.0001531394   0.001988072
      40    6 0.0009188361   0.011928429
      41    1 0.0001531394   0.001988072
      42    1 0.0001531394   0.001988072
      43    2 0.0003062787   0.003976143
      44    1 0.0001531394   0.001988072
      46    2 0.0003062787   0.003976143
      47    1 0.0001531394   0.001988072
      48    3 0.0004594181   0.005964215
      49    1 0.0001531394   0.001988072
      50   13 0.0019908116   0.025844930
      51    1 0.0001531394   0.001988072
      53    1 0.0001531394   0.001988072
      54    4 0.0006125574   0.007952286
      55    3 0.0004594181   0.005964215
      56    3 0.0004594181   0.005964215
      57    1 0.0001531394   0.001988072
      58    2 0.0003062787   0.003976143
      60    2 0.0003062787   0.003976143
      61    6 0.0009188361   0.011928429
      63    3 0.0004594181   0.005964215
      65    3 0.0004594181   0.005964215
      66    3 0.0004594181   0.005964215
      67    2 0.0003062787   0.003976143
      68    3 0.0004594181   0.005964215
      70    6 0.0009188361   0.011928429
      71    2 0.0003062787   0.003976143
      72    2 0.0003062787   0.003976143
      73    2 0.0003062787   0.003976143
      74    1 0.0001531394   0.001988072
      75    1 0.0001531394   0.001988072
      76    1 0.0001531394   0.001988072
      77    2 0.0003062787   0.003976143
      78    1 0.0001531394   0.001988072
      79    1 0.0001531394   0.001988072
      80    2 0.0003062787   0.003976143
      81    1 0.0001531394   0.001988072
      82    2 0.0003062787   0.003976143
      83    1 0.0001531394   0.001988072
      86    2 0.0003062787   0.003976143
      88    2 0.0003062787   0.003976143
      91    2 0.0003062787   0.003976143
      98    1 0.0001531394   0.001988072
     100    3 0.0004594181   0.005964215
      NA 6027 0.9229709035            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>psb8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n  mean    sd median trimmed mad min max range skew kurtosis   se
X1    1 503 17.25 25.84      0   12.14   0   0 100   100 1.37     0.64 1.15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(psb_alc <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(psb8) <span class="sc">%&gt;%</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Participant Intoxication"</span>,</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Self-Reported Intoxication"</span>,</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="perceived-partner-intoxication" class="level3">
<h3 class="anchored" data-anchor-id="perceived-partner-intoxication">Perceived partner intoxication</h3>
<p><code>psb9</code>: How intoxicated do you think the other person felt right before or during this sexual activity?</p>
<p>Least intoxicated ever felt in life (0) - Most intoxication ever felt in life (100) VAS</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb9) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb9
 .x[[i]]    n      percent valid_percent
       0  250 0.0382848392   0.497017893
       1   18 0.0027565084   0.035785288
       2   10 0.0015313936   0.019880716
       3   10 0.0015313936   0.019880716
       4    8 0.0012251149   0.015904573
       5    8 0.0012251149   0.015904573
       6    5 0.0007656968   0.009940358
       7    4 0.0006125574   0.007952286
       8    3 0.0004594181   0.005964215
       9    3 0.0004594181   0.005964215
      10   12 0.0018376723   0.023856859
      11    3 0.0004594181   0.005964215
      12    2 0.0003062787   0.003976143
      13    4 0.0006125574   0.007952286
      14    5 0.0007656968   0.009940358
      15    1 0.0001531394   0.001988072
      16    3 0.0004594181   0.005964215
      17    1 0.0001531394   0.001988072
      18    4 0.0006125574   0.007952286
      19    1 0.0001531394   0.001988072
      20    4 0.0006125574   0.007952286
      21    2 0.0003062787   0.003976143
      22    2 0.0003062787   0.003976143
      23    2 0.0003062787   0.003976143
      24    2 0.0003062787   0.003976143
      25    4 0.0006125574   0.007952286
      26    5 0.0007656968   0.009940358
      27    3 0.0004594181   0.005964215
      28    3 0.0004594181   0.005964215
      29    1 0.0001531394   0.001988072
      30    9 0.0013782542   0.017892644
      31    3 0.0004594181   0.005964215
      32    3 0.0004594181   0.005964215
      34    2 0.0003062787   0.003976143
      35    4 0.0006125574   0.007952286
      36    4 0.0006125574   0.007952286
      37    2 0.0003062787   0.003976143
      38    3 0.0004594181   0.005964215
      39    1 0.0001531394   0.001988072
      40    4 0.0006125574   0.007952286
      41    2 0.0003062787   0.003976143
      42    4 0.0006125574   0.007952286
      43    2 0.0003062787   0.003976143
      44    3 0.0004594181   0.005964215
      45    3 0.0004594181   0.005964215
      46    1 0.0001531394   0.001988072
      47    1 0.0001531394   0.001988072
      48    3 0.0004594181   0.005964215
      50   11 0.0016845329   0.021868787
      51    1 0.0001531394   0.001988072
      53    2 0.0003062787   0.003976143
      54    3 0.0004594181   0.005964215
      55    1 0.0001531394   0.001988072
      56    2 0.0003062787   0.003976143
      59    1 0.0001531394   0.001988072
      60    3 0.0004594181   0.005964215
      61    3 0.0004594181   0.005964215
      64    1 0.0001531394   0.001988072
      65    2 0.0003062787   0.003976143
      66    1 0.0001531394   0.001988072
      67    1 0.0001531394   0.001988072
      68    2 0.0003062787   0.003976143
      69    1 0.0001531394   0.001988072
      70    5 0.0007656968   0.009940358
      71    3 0.0004594181   0.005964215
      72    3 0.0004594181   0.005964215
      73    1 0.0001531394   0.001988072
      75    2 0.0003062787   0.003976143
      76    1 0.0001531394   0.001988072
      78    1 0.0001531394   0.001988072
      79    2 0.0003062787   0.003976143
      83    2 0.0003062787   0.003976143
      85    1 0.0001531394   0.001988072
      86    1 0.0001531394   0.001988072
      87    1 0.0001531394   0.001988072
      89    2 0.0003062787   0.003976143
      90    1 0.0001531394   0.001988072
      91    2 0.0003062787   0.003976143
     100    3 0.0004594181   0.005964215
      NA 6027 0.9229709035            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(psb9 <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(psb9) <span class="sc">%&gt;%</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hist</span>(<span class="at">main =</span> <span class="st">"Histogram of Partner Intoxication"</span>,</span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xlab =</span> <span class="st">"Perceived Partner Intoxication"</span>,</span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">"lightblue"</span>,</span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">breaks =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="0_clean_diary_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="drug-use-cannabis" class="level2">
<h2 class="anchored" data-anchor-id="drug-use-cannabis">Drug use (cannabis)</h2>
<p><code>psb10</code>: Which of the following drugs were you using prior to or during this sexual activity?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>psb_cub <span class="ot">&lt;-</span> d<span class="sc">$</span>psb10</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span>   </span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(psb_cub),</span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span>dplyr<span class="sc">::</span><span class="fu">recode</span>(., </span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"0"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"1"</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"4"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"7"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"7,1"</span> <span class="ot">=</span> <span class="dv">1</span>)))</span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb_cub) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl) <span class="co"># participant cannabis use</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb_cub
 .x[[i]]    n     percent valid_percent
       0   57 0.008728943       0.59375
       1   39 0.005972435       0.40625
      NA 6434 0.985298622            NA</code></pre>
</div>
</div>
<p>Response options endorsed:</p>
<ul>
<li>0 = None;</li>
<li>1 = Marijuana, cannabis;</li>
<li>4 = Adderall, or another stimulant (e.g., Vyvanse, Ritalin);</li>
<li>9 = Xanax, or another sedative</li>
<li>7 = Other prescription medication.</li>
</ul>
<p><code>psb11</code>: Which of the following drugs was the other person using prior to or during this sexual activity?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>partner_cub <span class="ot">&lt;-</span> d<span class="sc">$</span>psb11</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span>   </span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(partner_cub),</span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span>dplyr<span class="sc">::</span><span class="fu">recode</span>(., </span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"0"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"1"</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"9"</span> <span class="ot">=</span> <span class="dv">0</span>,</span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"7"</span> <span class="ot">=</span> <span class="dv">0</span>)))</span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb11, partner_cub) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl) <span class="co"># partner cannabis use</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb11
 .x[[i]]    n      percent valid_percent
       0  462 0.0707503828   0.925851703
       1   26 0.0039816233   0.052104208
       7   10 0.0015313936   0.020040080
       9    1 0.0001531394   0.002004008
      NA 6031 0.9235834609            NA

$partner_cub
 .x[[i]]    n     percent valid_percent
       0  473 0.072434916    0.94789579
       1   26 0.003981623    0.05210421
      NA 6031 0.923583461            NA</code></pre>
</div>
</div>
</section>
<section id="affect" class="level2">
<h2 class="anchored" data-anchor-id="affect">Affect</h2>
<p>Just before the encounter, how were you feeling? Not at all (0) - Very much (4) VAS<br>
- <code>pa1_p</code> Excited<br>
- <code>na1_p</code> Irritable<br>
- <code>na2_p</code> Distressed<br>
- <code>na3_p</code> Angry<br>
- <code>na4_p</code> Empty<br>
- <code>na5_p</code> Ashamed<br>
- <code>pa2_p</code> Calm</p>
<p>Dichotomous var representing presence vs.&nbsp;absence of negative affect pre-event</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span>  <span class="co"># calculate mean score</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">neg_sum =</span> <span class="fu">sum</span>(<span class="fu">c</span>( irri_p, dist_p, angr_p, empt_p, asha_p)))</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(irri_p, dist_p, angr_p, empt_p, asha_p),</span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">as.integer</span>(. <span class="sc">&gt;</span> <span class="dv">0</span>),</span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">.names =</span> <span class="st">"{sub('_p$', '_di', .col)}"</span>))</span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">psb_neg =</span> <span class="fu">sum</span>(irri_di, dist_di, angr_di, empt_di, asha_di))</span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">psb_neg_di =</span> <span class="fu">if_else</span>(psb_neg <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="fu">if_else</span>(psb_neg <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, psb_neg)))</span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(psb_neg_di) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psb_neg_di
 .x[[i]]    n    percent valid_percent
       0  396 0.06064319     0.7904192
       1  105 0.01607963     0.2095808
      NA 6029 0.92327718            NA</code></pre>
</div>
</div>
<p>Emotion regulation:</p>
<p>Thinking about your strongest emotion, how did you respond to the feeling?<br>
- <code>er1_p</code>: I tried to get rid of negative thoughts, feelings, or sensations<br>
- <code>er2_p</code>: I couldn’t stop thinking about my feelings<br>
- <code>er3_p</code>: I avoided expressing my feelings<br>
- <code>er4_p</code>: I changed the way I thought about what caused my feelings</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(er1_p<span class="sc">:</span>er4_p) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$er1_p
 .x[[i]]    n    percent valid_percent
       0  413 0.06324655     0.8276553
       1   86 0.01316998     0.1723447
      NA 6031 0.92358346            NA

$er2_p
 .x[[i]]    n     percent valid_percent
       0  447 0.068453292     0.8957916
       1   52 0.007963247     0.1042084
      NA 6031 0.923583461            NA

$er3_p
 .x[[i]]    n     percent valid_percent
       0  448 0.068606432     0.8977956
       1   51 0.007810107     0.1022044
      NA 6031 0.923583461            NA

$er4_p
 .x[[i]]    n     percent valid_percent
       0  465 0.071209801    0.93186373
       1   34 0.005206738    0.06813627
      NA 6031 0.923583461            NA</code></pre>
</div>
</div>
<p>Pre-encounter expectations and stress:</p>
<p>- <code>exp_p</code>: Earlier in the day, how likely did you think it was that you would have sexual activity?<br>
- <code>st_p</code>: How stressful had the day been for you?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">select</span>(exp_p, <span class="co"># Very unlikey (1) - Very likely (5) VAS</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>             st_p   <span class="co"># Not at all stressful (1) - Extremely Stressful (5) VAS</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">%&gt;%</span> <span class="fu">map</span>(tabyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$exp_p
 .x[[i]]    n    percent valid_percent
       1  106 0.01623277     0.2007576
       2   78 0.01194487     0.1477273
       3  131 0.02006126     0.2481061
       4   84 0.01286371     0.1590909
       5  129 0.01975498     0.2443182
      NA 6002 0.91914242            NA

$st_p
 .x[[i]]    n     percent valid_percent
       1  254 0.038897397    0.48106061
       2  131 0.020061256    0.24810606
       3   82 0.012557427    0.15530303
       4   39 0.005972435    0.07386364
       5   22 0.003369066    0.04166667
      NA 6002 0.919142420            NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expectations</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>exp_p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
X1    1 528  3.1 1.44      3    3.12 1.48   1   5     4 -0.08    -1.29 0.06</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># stress</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>psych<span class="sc">::</span><span class="fu">describe</span>(d<span class="sc">$</span>st_p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   vars   n mean   sd median trimmed  mad min max range skew kurtosis   se
X1    1 528 1.95 1.14      2    1.76 1.48   1   5     4 1.07     0.23 0.05</code></pre>
</div>
</div>
<p>Online and solo sexual behavior blocks</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">%&gt;%</span> </span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(osb2, osb2.txt, osb6<span class="sc">:</span>osbb10_11_10_text, osbb15, osbb15_5_text,</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>            aro_of, pls_of, pss, exp_o, str_o<span class="sc">:</span>er4_o, ssb3, ssb3.txt,</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>            ssb6<span class="sc">:</span>er4_s, dub2.txt, med1_d<span class="sc">:</span>exp_d, dub3_bf.txt, dub3_du.txt,</span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>            dub3_af.txt, status, q186_8_text, au_l<span class="sc">:</span>au_pbs.txt, </span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>            start_date<span class="sc">:</span>end_date, ip_address, recorded_date, </span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>            location_latitude, location_longitude, psb3, psb5a, psb6a<span class="sc">:</span>str_p.txt, </span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>            psb7a<span class="sc">:</span>psb15_tried_10_text, psb16_10_text<span class="sc">:</span>psb16_tried_10_text)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="save-updated-dataframe-for-diary-data" class="level2">
<h2 class="anchored" data-anchor-id="save-updated-dataframe-for-diary-data">Save updated dataframe for diary data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(path_ready, <span class="st">"ready_cues.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>